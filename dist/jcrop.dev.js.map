{"version":3,"sources":["webpack://Jcrop/webpack/bootstrap","webpack://Jcrop/./build/js/animate.js","webpack://Jcrop/./build/js/cropper.js","webpack://Jcrop/./build/js/defaults.js","webpack://Jcrop/./build/js/domobj.js","webpack://Jcrop/./build/js/dragger.js","webpack://Jcrop/./build/js/easing.js","webpack://Jcrop/./build/js/handle.js","webpack://Jcrop/./build/js/jcrop.js","webpack://Jcrop/./build/js/keyboard.js","webpack://Jcrop/./build/js/rect.js","webpack://Jcrop/./build/js/shade.js","webpack://Jcrop/./build/js/stage/dom.js","webpack://Jcrop/./build/js/stage/image.js","webpack://Jcrop/./build/js/sticker.js","webpack://Jcrop/./build/js/util/dom.js","webpack://Jcrop/./build/js/util/extend.js"],"names":["Animate","el","from","to","cb","frames","easingFunc","p","delta","cur","normalize","Easing","cur_frame","forEach","key","step","Math","round","requestAnimationFrame","Cropper","options","defaults","pos","Rect","createHandles","createMover","attachFocus","Keyboard","stage","emit","addEventListener","e","rect","efunc","render","r","pe","parentElement","w","h","stick","offsetWidth","offsetHeight","focus","x","y","rebound","handles","handle","Handle","create","c","appendTo","Sticker","move","active","style","top","left","width","height","DomObj","document","createElement","opts","Defaults","setAttribute","className","cropperClass","multi","maxCroppers","minCroppers","canDrag","canResize","canSelect","canRemove","multiple","autoFront","shading","shadeClass","shadeColor","shadeOpacity","getElementById","appendChild","evname","ev","createEvent","initEvent","cropTarget","dispatchEvent","cl","split","filter","i","join","length","hasClass","Dragger","startcb","movecb","donecb","ox","oy","start","pageX","pageY","preventDefault","stopPropagation","type","window","done","removeEventListener","remove","m","module","exports","def","swing","t","b","d","inQuad","outQuad","inOutQuad","inCubic","outCubic","inOutCubic","inQuart","outQuart","inOutQuart","inQuint","outQuint","inOutQuint","inSine","cos","PI","outSine","sin","inOutSine","inExpo","pow","outExpo","inOutExpo","inCirc","sqrt","outCirc","inOutCirc","inElastic","s","a","abs","asin","outElastic","inOutElastic","inBack","undefined","outBack","inOutBack","inBounce","outBounce","inOutBounce","clname","attach","tagName","ImageStage","Stage","cropper","shiftKey","nudge","console","log","min","x2","y2","max","x1","y1","v","fromCoordSet","p1","p2","offsetLeft","offsetTop","Manager","shades","Shade","enable","f","ceil","floor","l","insert","init","removeChild","o","backgroundColor","opacity","crops","Set","initListeners","initStageDrag","info","n","size","crop","canCreate","offsetParent","addCropper","activate","targ","adjust","removeCropper","z","zIndex","addClass","removeClass","refresh","Array","pop","delete","add","reorderCroppers","disable","attachToStage","wrapper","parentNode","insertBefore","srcEl","onload","resizeToImage","bind","ord","sw","sh","locked","getCornerPoint","getOppositeCorner","stuck","translateStuckPoint","xx","yy","sp","wrap","target","childNodes","child","div","replace","orig","replaceChild","extend","extended","arguments","argument","prop","Object","prototype","hasOwnProperty","call"],"mappings":";;AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;;;;;;;;AClFA;;;;;;AAEA,SAASA,OAAT,CAAiBC,EAAjB,EAAoBC,IAApB,EAAyBC,EAAzB,EAA4BC,EAA5B,EAA6D;AAAA,MAA9BC,MAA8B,uEAAvB,EAAuB;AAAA,MAApBC,UAAoB,uEAAT,OAAS;;AAC3D,MAAMC,IAAI,CAAC,GAAD,EAAK,GAAL,EAAS,GAAT,EAAa,GAAb,CAAV;AACA,MAAMC,QAAQ,EAAd;AACA,MAAMC,MAAMP,KAAKQ,SAAL,EAAZ;AACAJ,eAAc,OAAOA,UAAP,IAAqB,QAAtB,GAAiCK,iBAAOL,UAAP,CAAjC,GAAsDA,UAAnE;;AAEA,MAAIM,YAAY,CAAhB;;AAEAL,IAAEM,OAAF,CAAU;AAAA,WAAOL,MAAMM,GAAN,IAAa,CAACX,GAAGW,GAAH,IAAUZ,KAAKY,GAAL,CAAX,IAAwBT,MAA5C;AAAA,GAAV;;AAEA,WAASU,IAAT,GAAgB;;AAEd,QAAIH,YAAYP,MAAhB,EAAwB;;AAEtBE,QAAEM,OAAF,CAAU;AAAA,eACRJ,IAAIK,GAAJ,IAAWE,KAAKC,KAAL,CACTX,WAAWM,SAAX,EAAsBV,KAAKY,GAAL,CAAtB,EAAiCX,GAAGW,GAAH,IAAUZ,KAAKY,GAAL,CAA3C,EAAsDT,MAAtD,CADS,CADH;AAAA,OAAV;;AAMAD,SAAGK,GAAH;AACAG;AACAM,4BAAsBH,IAAtB;AACD;AACF;;AAEDG,wBAAsBH,IAAtB;AACD;;kBAEcf,O;;;;;;;;;;;;;;;;;;;;AC/Bf;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;;;IAEMmB,O;;;AAEJ,mBAAYlB,EAAZ,EAA2B;AAAA,QAAZmB,OAAY,uEAAJ,EAAI;;AAAA;;AAAA,kHACnBnB,EADmB;;AAEzB,UAAKmB,OAAL,GAAe,sBAAO,EAAP,EAAUD,QAAQE,QAAlB,EAA2BD,OAA3B,CAAf;AACA,UAAKE,GAAL,GAAWC,eAAKrB,IAAL,CAAU,MAAKD,EAAf,CAAX;AAHyB;AAI1B;;;;2BAEM;AACL,WAAKuB,aAAL;AACA,WAAKC,WAAL;AACA,WAAKC,WAAL;AACA,UAAIC,kBAAJ,CAAa,IAAb;AACA,aAAO,IAAP;AACD;;;kCAEaC,K,EAAO;AACnB,WAAKA,KAAL,GAAaA,KAAb;AACA,WAAKC,IAAL,CAAU,aAAV;AACD;;;kCAEa;AAAA;;AACZ,WAAK5B,EAAL,CAAQ6B,gBAAR,CAAyB,OAAzB,EAAiC,UAACC,CAAD,EAAO;AACtC,eAAKF,IAAL,CAAU,eAAV;AACA,eAAKA,IAAL,CAAU,aAAV;AACD,OAHD,EAGE,KAHF;AAID;;;4BAEOG,I,EAAqB;AAAA;;AAAA,UAAhB3B,MAAgB,uEAAT,EAAS;AAAA,UAAN4B,KAAM;;AAC3B,6BAAQ,KAAKhC,EAAb,EAAgB,KAAKqB,GAArB,EAAyBU,IAAzB,EAA8B;AAAA,eAAK,OAAKE,MAAL,CAAYC,EAAEzB,SAAF,EAAZ,CAAL;AAAA,OAA9B,EAA8DL,MAA9D,EAAqE4B,KAArE;AACD;;;kCAEa;AAAA;;AACZ,UAAMG,KAAK,KAAKnC,EAAL,CAAQoC,aAAnB;AACA,UAAIC,CAAJ,EAAMC,CAAN;AACA,WAAKjB,GAAL,GAAWC,eAAKrB,IAAL,CAAU,KAAKD,EAAf,CAAX;AACA,UAAIuC,KAAJ;AACA,6BACE,KAAKvC,EADP,EAEE,YAAM;AAAA,mBACI,CAAEmC,GAAGK,WAAL,EAAkBL,GAAGM,YAArB,CADJ;AACHJ,SADG;AACDC,SADC;;AAEJC,gBAAQjB,eAAKrB,IAAL,CAAU,OAAKD,EAAf,CAAR;AACA,eAAKA,EAAL,CAAQ0C,KAAR;AACA,eAAKd,IAAL,CAAU,eAAV;AACA,eAAO,IAAP;AACD,OARH,EASE,UAACe,CAAD,EAAGC,CAAH,EAAS;AACP,eAAKvB,GAAL,CAASsB,CAAT,GAAaJ,MAAMI,CAAN,GAAUA,CAAvB;AACA,eAAKtB,GAAL,CAASuB,CAAT,GAAaL,MAAMK,CAAN,GAAUA,CAAvB;AACA,eAAKX,MAAL,CAAY,OAAKZ,GAAL,CAASwB,OAAT,CAAiBR,CAAjB,EAAmBC,CAAnB,CAAZ;AACD,OAbH,EAcE,YAAM,CAAG,CAdX;AAgBD;;;4BAEc;AAAA,UAATK,CAAS,uEAAP,CAAO;AAAA,UAALC,CAAK,uEAAH,CAAG;;AACb,UAAMT,KAAK,KAAKnC,EAAL,CAAQoC,aAAnB;AADa,kBAEC,CAAED,GAAGK,WAAL,EAAkBL,GAAGM,YAArB,CAFD;AAAA,UAENJ,CAFM;AAAA,UAEJC,CAFI;;AAGb,UAAIK,CAAJ,EAAO,KAAKtB,GAAL,CAASsB,CAAT,IAAcA,CAAd;AACP,UAAIC,CAAJ,EAAO,KAAKvB,GAAL,CAASuB,CAAT,IAAcA,CAAd;AACP,WAAKX,MAAL,CAAY,KAAKZ,GAAL,CAASwB,OAAT,CAAiBR,CAAjB,EAAmBC,CAAnB,CAAZ;AACD;;;oCAEe;AAAA;;AACd,WAAKnB,OAAL,CAAa2B,OAAb,CAAqBlC,OAArB,CAA6B,aAAK;AAChC,YAAMmC,SAASC,iBAAOC,MAAP,CAAc,YAAUC,CAAxB,CAAf;AACA,YAAMf,KAAK,OAAKnC,EAAL,CAAQoC,aAAnB;AAFgC,oBAGlB,CAAED,GAAGK,WAAL,EAAkBL,GAAGM,YAArB,CAHkB;AAAA,YAGzBJ,CAHyB;AAAA,YAGvBC,CAHuB;;AAIhCS,eAAOI,QAAP,CAAgB,OAAKnD,EAArB;;AAEA,YAAIuC,KAAJ;AACA,+BAAQQ,OAAO/C,EAAf,EACE,YAAM;AACJuC,kBAAQa,kBAAQH,MAAR,CAAe3B,eAAKrB,IAAL,CAAU,OAAKD,EAAf,CAAf,EAAmCqC,CAAnC,EAAsCC,CAAtC,EAAyCY,CAAzC,CAAR;AACA,iBAAKlD,EAAL,CAAQ0C,KAAR;AACA,iBAAKd,IAAL,CAAU,aAAV;AACA,iBAAO,IAAP;AACD,SANH,EAOE,UAACe,CAAD,EAAGC,CAAH;AAAA,iBAAS,OAAKX,MAAL,CAAYM,MAAMc,IAAN,CAAWV,CAAX,EAAaC,CAAb,CAAZ,CAAT;AAAA,SAPF,EAQE,YAAM,CAAG,CARX;AAUD,OAjBD;AAkBA,aAAO,IAAP;AACD;;;+BAEU;AACT,aAAQ,KAAKjB,KAAL,IAAe,KAAKA,KAAL,CAAW2B,MAAX,KAAsB,IAA7C;AACD;;;2BAEMpB,C,EAAG;AACRA,UAAIA,KAAK,KAAKb,GAAd;AACA,WAAKrB,EAAL,CAAQuD,KAAR,CAAcC,GAAd,GAAoBtB,EAAEU,CAAF,GAAM,IAA1B;AACA,WAAK5C,EAAL,CAAQuD,KAAR,CAAcE,IAAd,GAAqBvB,EAAES,CAAF,GAAM,IAA3B;AACA,WAAK3C,EAAL,CAAQuD,KAAR,CAAcG,KAAd,GAAsBxB,EAAEG,CAAF,GAAM,IAA5B;AACA,WAAKrC,EAAL,CAAQuD,KAAR,CAAcI,MAAd,GAAuBzB,EAAEI,CAAF,GAAM,IAA7B;AACA,WAAKjB,GAAL,GAAWa,CAAX;AACA,WAAKN,IAAL,CAAU,aAAV;AACA,aAAO,IAAP;AACD;;;mCAEc;AACb,WAAKP,GAAL,GAAWC,eAAKrB,IAAL,CAAU,KAAKD,EAAf,CAAX;AACD;;;;EAtGmB4D,gB;;AA0GtB1C,QAAQ+B,MAAR,GAAiB,YAAoB;AAAA,MAAX9B,OAAW,uEAAH,EAAG;;AACnC,MAAMnB,KAAK6D,SAASC,aAAT,CAAuB,KAAvB,CAAX;AACA,MAAMC,OAAO,sBAAO,EAAP,EAAUC,kBAAV,EAAmB7C,OAAnB,CAAb;AACAnB,KAAGiE,YAAH,CAAgB,UAAhB,EAA2B,GAA3B;AACAjE,KAAGkE,SAAH,GAAeH,KAAKI,YAAL,IAAqB,SAApC;AACA,SAAO,IAAIjD,OAAJ,CAAYlB,EAAZ,EAAe+D,IAAf,CAAP;AACD,CAND;;kBAQe7C,O;;;;;;;;;;;;;;;;;kBC5HA;AACbkD,SAAO,IADM;AAEbC,eAAa,IAFA;AAGbC,eAAa,CAHA;AAIbH,gBAAc,SAJD;AAKbI,WAAS,IALI;AAMbC,aAAW,IANE;AAObC,aAAW,IAPE;AAQbC,aAAW,IARE;AASbC,YAAU,KATG;AAUbC,aAAW,IAVE;AAWbtB,UAAQ,IAXK;AAYbR,WAAS,CAAC,GAAD,EAAK,GAAL,EAAS,GAAT,EAAa,GAAb,EAAiB,IAAjB,EAAsB,IAAtB,EAA2B,IAA3B,EAAgC,IAAhC,CAZI;AAab+B,WAAS,IAbI;AAcbC,cAAY,OAdC;AAebC,cAAY,OAfC;AAgBbC,gBAAc,GAhBD;AAiBbrC,KAAG,CAjBU;AAkBbC,KAAG,CAlBU;AAmBbP,KAAG,GAnBU;AAoBbC,KAAG;AApBU,C;;;;;;;;;;;;;;;;;;;;;;ICATsB,M;AAEJ,kBAAY5D,EAAZ,EAAgB;AAAA;;AACd,QAAI,OAAOA,EAAP,IAAa,QAAjB,EAA2BA,KAAK6D,SAASoB,cAAT,CAAwBjF,EAAxB,CAAL;AAC3B,SAAKA,EAAL,GAAUA,EAAV;AACD;;;;6BAEQA,E,EAAI;AACX,UAAI,OAAOA,EAAP,IAAa,QAAjB,EAA2BA,KAAK6D,SAASoB,cAAT,CAAwBjF,EAAxB,CAAL;AAC3BA,SAAGkF,WAAH,CAAe,KAAKlF,EAApB;AACA,aAAO,IAAP;AACD;;;yBAEImF,M,EAAQ;AACX,UAAMC,KAAKvB,SAASwB,WAAT,CAAqB,OAArB,CAAX;AACAD,SAAGE,SAAH,CAAaH,MAAb,EAAqB,IAArB,EAA2B,IAA3B;AACAC,SAAGG,UAAH,GAAgB,IAAhB;AACA,WAAKvF,EAAL,CAAQwF,aAAR,CAAsBJ,EAAtB;AACD;;;gCAEWK,E,EAAI;AACd,WAAKzF,EAAL,CAAQkE,SAAR,GAAoB,KAAKlE,EAAL,CAAQkE,SAAR,CACjBwB,KADiB,CACX,GADW,EACNC,MADM,CACC;AAAA,eAAKF,MAAMG,CAAX;AAAA,OADD,EACeC,IADf,CACoB,GADpB,CAApB;AAEA,aAAO,IAAP;AACD;;;6BAEQJ,E,EAAI;AACX,aAAO,KAAKzF,EAAL,CAAQkE,SAAR,CAAkBwB,KAAlB,CAAwB,GAAxB,EAA6BC,MAA7B,CAAoC;AAAA,eAAKF,MAAMG,CAAX;AAAA,OAApC,EAAkDE,MAAzD;AACD;;;6BAEQL,E,EAAI;AACX,UAAI,CAAC,KAAKM,QAAL,CAAcN,EAAd,CAAL,EAAwB,KAAKzF,EAAL,CAAQkE,SAAR,IAAqB,MAAMuB,EAA3B;AACzB;;;;;;kBAIY7B,M;;;;;;;;;;;;;;;;;ACpCf;;;;AAIA,IAAMoC,UAAU,SAAVA,OAAU,CAAShG,EAAT,EAAYiG,OAAZ,EAAoBC,MAApB,EAA2BC,MAA3B,EAAkC;AAChD,MAAIC,EAAJ,EAAQC,EAAR;AACA,MAAI,OAAOrG,EAAP,IAAa,QAAjB,EAA2BA,KAAK6D,SAASoB,cAAT,CAAwBjF,EAAxB,CAAL;;AAE3BA,KAAG6B,gBAAH,CAAoB,WAApB,EAAgCyE,KAAhC;AACAtG,KAAG6B,gBAAH,CAAoB,YAApB,EAAiCyE,KAAjC;;AAEA,WAASA,KAAT,CAAexE,CAAf,EAAkB;AAChBsE,SAAKtE,EAAEyE,KAAP;AACAF,SAAKvE,EAAE0E,KAAP;;AAEA1E,MAAE2E,cAAF;AACA3E,MAAE4E,eAAF;;AAEA,QAAI,CAACT,QAAQG,EAAR,EAAWC,EAAX,EAAcvE,CAAd,CAAL,EAAuB;;AAEvB,QAAIA,EAAE6E,IAAF,IAAU,WAAd,EAA2B;AACzBC,aAAO/E,gBAAP,CAAwB,WAAxB,EAAoCwB,IAApC;AACAQ,eAAShC,gBAAT,CAA0B,SAA1B,EAAoCgF,IAApC;AACD,KAHD,MAIK,IAAI/E,EAAE6E,IAAF,IAAU,YAAd,EAA4B;AAC/B9C,eAAShC,gBAAT,CAA0B,WAA1B,EAAsCwB,IAAtC;AACAQ,eAAShC,gBAAT,CAA0B,UAA1B,EAAqCgF,IAArC;AACD;AACF;;AAED,WAASxD,IAAT,CAAcvB,CAAd,EAAiB;AACfA,MAAE2E,cAAF;AACA3E,MAAE4E,eAAF;;AAEAR,WAAOpE,EAAEyE,KAAF,GAAUH,EAAjB,EAAoBtE,EAAE0E,KAAF,GAAUH,EAA9B;AACD;;AAED,WAASQ,IAAT,CAAc/E,CAAd,EAAiB;AACf,QAAIA,EAAEyE,KAAF,IAAWzE,EAAE0E,KAAjB,EACEN,OAAOpE,EAAEyE,KAAF,GAAUH,EAAjB,EAAoBtE,EAAE0E,KAAF,GAAUH,EAA9B;;AAEFxC,aAASiD,mBAAT,CAA6B,SAA7B,EAAuCD,IAAvC;AACAD,WAAOE,mBAAP,CAA2B,WAA3B,EAAuCzD,IAAvC;AACAQ,aAASiD,mBAAT,CAA6B,WAA7B,EAAyCzD,IAAzC;AACAQ,aAASiD,mBAAT,CAA6B,UAA7B,EAAwCD,IAAxC;;AAEAV;AACD;;AAED,WAASY,MAAT,GAAkB;AAChB/G,OAAG8G,mBAAH,CAAuB,WAAvB,EAAmCR,KAAnC;AACAtG,OAAG8G,mBAAH,CAAuB,YAAvB,EAAoCR,KAApC;AACD;;AAED,SAAO,EAAES,cAAF,EAAP;AACD,CAnDD;;kBAqDef,O;;;;;;;;;;;;;;ACzDf;;;;;;;;AAQA,IAAMgB,IAAIC,OAAOC,OAAP,GAAiB;AACzB;AACAC,OAAK,SAFoB;AAGzBC,SAAO,eAAUC,CAAV,EAAaC,CAAb,EAAgBpE,CAAhB,EAAmBqE,CAAnB,EAAsB;AAC3B,WAAOP,EAAEA,EAAEG,GAAJ,EAASE,CAAT,EAAYC,CAAZ,EAAepE,CAAf,EAAkBqE,CAAlB,CAAP;AACD,GALwB;AAMzBC,UAAQ,gBAAUH,CAAV,EAAaC,CAAb,EAAgBpE,CAAhB,EAAmBqE,CAAnB,EAAsB;AAC5B,WAAOrE,KAAGmE,KAAGE,CAAN,IAASF,CAAT,GAAaC,CAApB;AACD,GARwB;AASzBG,WAAS,iBAAUJ,CAAV,EAAaC,CAAb,EAAgBpE,CAAhB,EAAmBqE,CAAnB,EAAsB;AAC7B,WAAO,CAACrE,CAAD,IAAKmE,KAAGE,CAAR,KAAYF,IAAE,CAAd,IAAmBC,CAA1B;AACD,GAXwB;AAYzBI,aAAW,mBAAUL,CAAV,EAAaC,CAAb,EAAgBpE,CAAhB,EAAmBqE,CAAnB,EAAsB;AAC/B,QAAI,CAACF,KAAGE,IAAE,CAAN,IAAW,CAAf,EAAkB,OAAOrE,IAAE,CAAF,GAAImE,CAAJ,GAAMA,CAAN,GAAUC,CAAjB;AAClB,WAAO,CAACpE,CAAD,GAAG,CAAH,IAAS,EAAEmE,CAAH,IAAOA,IAAE,CAAT,IAAc,CAAtB,IAA2BC,CAAlC;AACD,GAfwB;AAgBzBK,WAAS,iBAAUN,CAAV,EAAaC,CAAb,EAAgBpE,CAAhB,EAAmBqE,CAAnB,EAAsB;AAC7B,WAAOrE,KAAGmE,KAAGE,CAAN,IAASF,CAAT,GAAWA,CAAX,GAAeC,CAAtB;AACD,GAlBwB;AAmBzBM,YAAU,kBAAUP,CAAV,EAAaC,CAAb,EAAgBpE,CAAhB,EAAmBqE,CAAnB,EAAsB;AAC9B,WAAOrE,KAAG,CAACmE,IAAEA,IAAEE,CAAF,GAAI,CAAP,IAAUF,CAAV,GAAYA,CAAZ,GAAgB,CAAnB,IAAwBC,CAA/B;AACD,GArBwB;AAsBzBO,cAAY,oBAAUR,CAAV,EAAaC,CAAb,EAAgBpE,CAAhB,EAAmBqE,CAAnB,EAAsB;AAChC,QAAI,CAACF,KAAGE,IAAE,CAAN,IAAW,CAAf,EAAkB,OAAOrE,IAAE,CAAF,GAAImE,CAAJ,GAAMA,CAAN,GAAQA,CAAR,GAAYC,CAAnB;AAClB,WAAOpE,IAAE,CAAF,IAAK,CAACmE,KAAG,CAAJ,IAAOA,CAAP,GAASA,CAAT,GAAa,CAAlB,IAAuBC,CAA9B;AACD,GAzBwB;AA0BzBQ,WAAS,iBAAUT,CAAV,EAAaC,CAAb,EAAgBpE,CAAhB,EAAmBqE,CAAnB,EAAsB;AAC7B,WAAOrE,KAAGmE,KAAGE,CAAN,IAASF,CAAT,GAAWA,CAAX,GAAaA,CAAb,GAAiBC,CAAxB;AACD,GA5BwB;AA6BzBS,YAAU,kBAAUV,CAAV,EAAaC,CAAb,EAAgBpE,CAAhB,EAAmBqE,CAAnB,EAAsB;AAC9B,WAAO,CAACrE,CAAD,IAAM,CAACmE,IAAEA,IAAEE,CAAF,GAAI,CAAP,IAAUF,CAAV,GAAYA,CAAZ,GAAcA,CAAd,GAAkB,CAAxB,IAA6BC,CAApC;AACD,GA/BwB;AAgCzBU,cAAY,oBAAUX,CAAV,EAAaC,CAAb,EAAgBpE,CAAhB,EAAmBqE,CAAnB,EAAsB;AAChC,QAAI,CAACF,KAAGE,IAAE,CAAN,IAAW,CAAf,EAAkB,OAAOrE,IAAE,CAAF,GAAImE,CAAJ,GAAMA,CAAN,GAAQA,CAAR,GAAUA,CAAV,GAAcC,CAArB;AAClB,WAAO,CAACpE,CAAD,GAAG,CAAH,IAAQ,CAACmE,KAAG,CAAJ,IAAOA,CAAP,GAASA,CAAT,GAAWA,CAAX,GAAe,CAAvB,IAA4BC,CAAnC;AACD,GAnCwB;AAoCzBW,WAAS,iBAAUZ,CAAV,EAAaC,CAAb,EAAgBpE,CAAhB,EAAmBqE,CAAnB,EAAsB;AAC7B,WAAOrE,KAAGmE,KAAGE,CAAN,IAASF,CAAT,GAAWA,CAAX,GAAaA,CAAb,GAAeA,CAAf,GAAmBC,CAA1B;AACD,GAtCwB;AAuCzBY,YAAU,kBAAUb,CAAV,EAAaC,CAAb,EAAgBpE,CAAhB,EAAmBqE,CAAnB,EAAsB;AAC9B,WAAOrE,KAAG,CAACmE,IAAEA,IAAEE,CAAF,GAAI,CAAP,IAAUF,CAAV,GAAYA,CAAZ,GAAcA,CAAd,GAAgBA,CAAhB,GAAoB,CAAvB,IAA4BC,CAAnC;AACD,GAzCwB;AA0CzBa,cAAY,oBAAUd,CAAV,EAAaC,CAAb,EAAgBpE,CAAhB,EAAmBqE,CAAnB,EAAsB;AAChC,QAAI,CAACF,KAAGE,IAAE,CAAN,IAAW,CAAf,EAAkB,OAAOrE,IAAE,CAAF,GAAImE,CAAJ,GAAMA,CAAN,GAAQA,CAAR,GAAUA,CAAV,GAAYA,CAAZ,GAAgBC,CAAvB;AAClB,WAAOpE,IAAE,CAAF,IAAK,CAACmE,KAAG,CAAJ,IAAOA,CAAP,GAASA,CAAT,GAAWA,CAAX,GAAaA,CAAb,GAAiB,CAAtB,IAA2BC,CAAlC;AACD,GA7CwB;AA8CzBc,UAAQ,gBAAUf,CAAV,EAAaC,CAAb,EAAgBpE,CAAhB,EAAmBqE,CAAnB,EAAsB;AAC5B,WAAO,CAACrE,CAAD,GAAKnC,KAAKsH,GAAL,CAAShB,IAAEE,CAAF,IAAOxG,KAAKuH,EAAL,GAAQ,CAAf,CAAT,CAAL,GAAmCpF,CAAnC,GAAuCoE,CAA9C;AACD,GAhDwB;AAiDzBiB,WAAS,iBAAUlB,CAAV,EAAaC,CAAb,EAAgBpE,CAAhB,EAAmBqE,CAAnB,EAAsB;AAC7B,WAAOrE,IAAInC,KAAKyH,GAAL,CAASnB,IAAEE,CAAF,IAAOxG,KAAKuH,EAAL,GAAQ,CAAf,CAAT,CAAJ,GAAkChB,CAAzC;AACD,GAnDwB;AAoDzBmB,aAAW,mBAAUpB,CAAV,EAAaC,CAAb,EAAgBpE,CAAhB,EAAmBqE,CAAnB,EAAsB;AAC/B,WAAO,CAACrE,CAAD,GAAG,CAAH,IAAQnC,KAAKsH,GAAL,CAAStH,KAAKuH,EAAL,GAAQjB,CAAR,GAAUE,CAAnB,IAAwB,CAAhC,IAAqCD,CAA5C;AACD,GAtDwB;AAuDzBoB,UAAQ,gBAAUrB,CAAV,EAAaC,CAAb,EAAgBpE,CAAhB,EAAmBqE,CAAnB,EAAsB;AAC5B,WAAQF,KAAG,CAAJ,GAASC,CAAT,GAAapE,IAAInC,KAAK4H,GAAL,CAAS,CAAT,EAAY,MAAMtB,IAAEE,CAAF,GAAM,CAAZ,CAAZ,CAAJ,GAAkCD,CAAtD;AACD,GAzDwB;AA0DzBsB,WAAS,iBAAUvB,CAAV,EAAaC,CAAb,EAAgBpE,CAAhB,EAAmBqE,CAAnB,EAAsB;AAC7B,WAAQF,KAAGE,CAAJ,GAASD,IAAEpE,CAAX,GAAeA,KAAK,CAACnC,KAAK4H,GAAL,CAAS,CAAT,EAAY,CAAC,EAAD,GAAMtB,CAAN,GAAQE,CAApB,CAAD,GAA0B,CAA/B,IAAoCD,CAA1D;AACD,GA5DwB;AA6DzBuB,aAAW,mBAAUxB,CAAV,EAAaC,CAAb,EAAgBpE,CAAhB,EAAmBqE,CAAnB,EAAsB;AAC/B,QAAIF,KAAG,CAAP,EAAU,OAAOC,CAAP;AACV,QAAID,KAAGE,CAAP,EAAU,OAAOD,IAAEpE,CAAT;AACV,QAAI,CAACmE,KAAGE,IAAE,CAAN,IAAW,CAAf,EAAkB,OAAOrE,IAAE,CAAF,GAAMnC,KAAK4H,GAAL,CAAS,CAAT,EAAY,MAAMtB,IAAI,CAAV,CAAZ,CAAN,GAAkCC,CAAzC;AAClB,WAAOpE,IAAE,CAAF,IAAO,CAACnC,KAAK4H,GAAL,CAAS,CAAT,EAAY,CAAC,EAAD,GAAM,EAAEtB,CAApB,CAAD,GAA0B,CAAjC,IAAsCC,CAA7C;AACD,GAlEwB;AAmEzBwB,UAAQ,gBAAUzB,CAAV,EAAaC,CAAb,EAAgBpE,CAAhB,EAAmBqE,CAAnB,EAAsB;AAC5B,WAAO,CAACrE,CAAD,IAAMnC,KAAKgI,IAAL,CAAU,IAAI,CAAC1B,KAAGE,CAAJ,IAAOF,CAArB,IAA0B,CAAhC,IAAqCC,CAA5C;AACD,GArEwB;AAsEzB0B,WAAS,iBAAU3B,CAAV,EAAaC,CAAb,EAAgBpE,CAAhB,EAAmBqE,CAAnB,EAAsB;AAC7B,WAAOrE,IAAInC,KAAKgI,IAAL,CAAU,IAAI,CAAC1B,IAAEA,IAAEE,CAAF,GAAI,CAAP,IAAUF,CAAxB,CAAJ,GAAiCC,CAAxC;AACD,GAxEwB;AAyEzB2B,aAAW,mBAAU5B,CAAV,EAAaC,CAAb,EAAgBpE,CAAhB,EAAmBqE,CAAnB,EAAsB;AAC/B,QAAI,CAACF,KAAGE,IAAE,CAAN,IAAW,CAAf,EAAkB,OAAO,CAACrE,CAAD,GAAG,CAAH,IAAQnC,KAAKgI,IAAL,CAAU,IAAI1B,IAAEA,CAAhB,IAAqB,CAA7B,IAAkCC,CAAzC;AAClB,WAAOpE,IAAE,CAAF,IAAOnC,KAAKgI,IAAL,CAAU,IAAI,CAAC1B,KAAG,CAAJ,IAAOA,CAArB,IAA0B,CAAjC,IAAsCC,CAA7C;AACD,GA5EwB;AA6EzB4B,aAAW,mBAAU7B,CAAV,EAAaC,CAAb,EAAgBpE,CAAhB,EAAmBqE,CAAnB,EAAsB;AAC/B,QAAI4B,IAAE,OAAN,CAAc,IAAI7I,IAAE,CAAN,CAAQ,IAAI8I,IAAElG,CAAN;AACtB,QAAImE,KAAG,CAAP,EAAU,OAAOC,CAAP,CAAW,IAAI,CAACD,KAAGE,CAAJ,KAAQ,CAAZ,EAAe,OAAOD,IAAEpE,CAAT,CAAa,IAAI,CAAC5C,CAAL,EAAQA,IAAEiH,IAAE,EAAJ;AACzD,QAAI6B,IAAIrI,KAAKsI,GAAL,CAASnG,CAAT,CAAR,EAAqB;AAAEkG,UAAElG,CAAF,CAAK,IAAIiG,IAAE7I,IAAE,CAAR;AAAY,KAAxC,MACK,IAAI6I,IAAI7I,KAAG,IAAES,KAAKuH,EAAV,IAAgBvH,KAAKuI,IAAL,CAAWpG,IAAEkG,CAAb,CAAxB;AACL,WAAO,EAAEA,IAAErI,KAAK4H,GAAL,CAAS,CAAT,EAAW,MAAItB,KAAG,CAAP,CAAX,CAAF,GAA0BtG,KAAKyH,GAAL,CAAU,CAACnB,IAAEE,CAAF,GAAI4B,CAAL,KAAS,IAAEpI,KAAKuH,EAAhB,IAAoBhI,CAA9B,CAA5B,IAAiEgH,CAAxE;AACD,GAnFwB;AAoFzBiC,cAAY,oBAAUlC,CAAV,EAAaC,CAAb,EAAgBpE,CAAhB,EAAmBqE,CAAnB,EAAsB;AAChC,QAAI4B,IAAE,OAAN,CAAc,IAAI7I,IAAE,CAAN,CAAQ,IAAI8I,IAAElG,CAAN;AACtB,QAAImE,KAAG,CAAP,EAAU,OAAOC,CAAP,CAAW,IAAI,CAACD,KAAGE,CAAJ,KAAQ,CAAZ,EAAe,OAAOD,IAAEpE,CAAT,CAAa,IAAI,CAAC5C,CAAL,EAAQA,IAAEiH,IAAE,EAAJ;AACzD,QAAI6B,IAAIrI,KAAKsI,GAAL,CAASnG,CAAT,CAAR,EAAqB;AAAEkG,UAAElG,CAAF,CAAK,IAAIiG,IAAE7I,IAAE,CAAR;AAAY,KAAxC,MACK,IAAI6I,IAAI7I,KAAG,IAAES,KAAKuH,EAAV,IAAgBvH,KAAKuI,IAAL,CAAWpG,IAAEkG,CAAb,CAAxB;AACL,WAAOA,IAAErI,KAAK4H,GAAL,CAAS,CAAT,EAAW,CAAC,EAAD,GAAItB,CAAf,CAAF,GAAsBtG,KAAKyH,GAAL,CAAU,CAACnB,IAAEE,CAAF,GAAI4B,CAAL,KAAS,IAAEpI,KAAKuH,EAAhB,IAAoBhI,CAA9B,CAAtB,GAA0D4C,CAA1D,GAA8DoE,CAArE;AACD,GA1FwB;AA2FzBkC,gBAAc,sBAAUnC,CAAV,EAAaC,CAAb,EAAgBpE,CAAhB,EAAmBqE,CAAnB,EAAsB;AAClC,QAAI4B,IAAE,OAAN,CAAc,IAAI7I,IAAE,CAAN,CAAQ,IAAI8I,IAAElG,CAAN;AACtB,QAAImE,KAAG,CAAP,EAAU,OAAOC,CAAP,CAAW,IAAI,CAACD,KAAGE,IAAE,CAAN,KAAU,CAAd,EAAiB,OAAOD,IAAEpE,CAAT,CAAa,IAAI,CAAC5C,CAAL,EAAQA,IAAEiH,KAAG,KAAG,GAAN,CAAF;AAC3D,QAAI6B,IAAIrI,KAAKsI,GAAL,CAASnG,CAAT,CAAR,EAAqB;AAAEkG,UAAElG,CAAF,CAAK,IAAIiG,IAAE7I,IAAE,CAAR;AAAY,KAAxC,MACK,IAAI6I,IAAI7I,KAAG,IAAES,KAAKuH,EAAV,IAAgBvH,KAAKuI,IAAL,CAAWpG,IAAEkG,CAAb,CAAxB;AACL,QAAI/B,IAAI,CAAR,EAAW,OAAO,CAAC,EAAD,IAAK+B,IAAErI,KAAK4H,GAAL,CAAS,CAAT,EAAW,MAAItB,KAAG,CAAP,CAAX,CAAF,GAA0BtG,KAAKyH,GAAL,CAAU,CAACnB,IAAEE,CAAF,GAAI4B,CAAL,KAAS,IAAEpI,KAAKuH,EAAhB,IAAoBhI,CAA9B,CAA/B,IAAoEgH,CAA3E;AACX,WAAO8B,IAAErI,KAAK4H,GAAL,CAAS,CAAT,EAAW,CAAC,EAAD,IAAKtB,KAAG,CAAR,CAAX,CAAF,GAA2BtG,KAAKyH,GAAL,CAAU,CAACnB,IAAEE,CAAF,GAAI4B,CAAL,KAAS,IAAEpI,KAAKuH,EAAhB,IAAoBhI,CAA9B,CAA3B,GAA6D,EAA7D,GAAkE4C,CAAlE,GAAsEoE,CAA7E;AACD,GAlGwB;AAmGzBmC,UAAQ,gBAAUpC,CAAV,EAAaC,CAAb,EAAgBpE,CAAhB,EAAmBqE,CAAnB,EAAsB4B,CAAtB,EAAyB;AAC/B,QAAIA,KAAKO,SAAT,EAAoBP,IAAI,OAAJ;AACpB,WAAOjG,KAAGmE,KAAGE,CAAN,IAASF,CAAT,IAAY,CAAC8B,IAAE,CAAH,IAAM9B,CAAN,GAAU8B,CAAtB,IAA2B7B,CAAlC;AACD,GAtGwB;AAuGzBqC,WAAS,iBAAUtC,CAAV,EAAaC,CAAb,EAAgBpE,CAAhB,EAAmBqE,CAAnB,EAAsB4B,CAAtB,EAAyB;AAChC,QAAIA,KAAKO,SAAT,EAAoBP,IAAI,OAAJ;AACpB,WAAOjG,KAAG,CAACmE,IAAEA,IAAEE,CAAF,GAAI,CAAP,IAAUF,CAAV,IAAa,CAAC8B,IAAE,CAAH,IAAM9B,CAAN,GAAU8B,CAAvB,IAA4B,CAA/B,IAAoC7B,CAA3C;AACD,GA1GwB;AA2GzBsC,aAAW,mBAAUvC,CAAV,EAAaC,CAAb,EAAgBpE,CAAhB,EAAmBqE,CAAnB,EAAsB4B,CAAtB,EAAyB;AAClC,QAAIA,KAAKO,SAAT,EAAoBP,IAAI,OAAJ;AACpB,QAAI,CAAC9B,KAAGE,IAAE,CAAN,IAAW,CAAf,EAAkB,OAAOrE,IAAE,CAAF,IAAKmE,IAAEA,CAAF,IAAK,CAAC,CAAC8B,KAAI,KAAL,IAAa,CAAd,IAAiB9B,CAAjB,GAAqB8B,CAA1B,CAAL,IAAqC7B,CAA5C;AAClB,WAAOpE,IAAE,CAAF,IAAK,CAACmE,KAAG,CAAJ,IAAOA,CAAP,IAAU,CAAC,CAAC8B,KAAI,KAAL,IAAa,CAAd,IAAiB9B,CAAjB,GAAqB8B,CAA/B,IAAoC,CAAzC,IAA8C7B,CAArD;AACD,GA/GwB;AAgHzBuC,YAAU,kBAAUxC,CAAV,EAAaC,CAAb,EAAgBpE,CAAhB,EAAmBqE,CAAnB,EAAsB;AAC9B,WAAOrE,IAAI8D,EAAE8C,SAAF,CAAavC,IAAEF,CAAf,EAAkB,CAAlB,EAAqBnE,CAArB,EAAwBqE,CAAxB,CAAJ,GAAiCD,CAAxC;AACD,GAlHwB;AAmHzBwC,aAAW,mBAAUzC,CAAV,EAAaC,CAAb,EAAgBpE,CAAhB,EAAmBqE,CAAnB,EAAsB;AAC/B,QAAI,CAACF,KAAGE,CAAJ,IAAU,IAAE,IAAhB,EAAuB;AACrB,aAAOrE,KAAG,SAAOmE,CAAP,GAASA,CAAZ,IAAiBC,CAAxB;AACD,KAFD,MAEO,IAAID,IAAK,IAAE,IAAX,EAAkB;AACvB,aAAOnE,KAAG,UAAQmE,KAAI,MAAI,IAAhB,IAAuBA,CAAvB,GAA2B,GAA9B,IAAqCC,CAA5C;AACD,KAFM,MAEA,IAAID,IAAK,MAAI,IAAb,EAAoB;AACzB,aAAOnE,KAAG,UAAQmE,KAAI,OAAK,IAAjB,IAAwBA,CAAxB,GAA4B,KAA/B,IAAwCC,CAA/C;AACD,KAFM,MAEA;AACL,aAAOpE,KAAG,UAAQmE,KAAI,QAAM,IAAlB,IAAyBA,CAAzB,GAA6B,OAAhC,IAA2CC,CAAlD;AACD;AACF,GA7HwB;AA8HzByC,eAAa,qBAAU1C,CAAV,EAAaC,CAAb,EAAgBpE,CAAhB,EAAmBqE,CAAnB,EAAsB;AACjC,QAAIF,IAAIE,IAAE,CAAV,EAAa,OAAOP,EAAE6C,QAAF,CAAYxC,IAAE,CAAd,EAAiB,CAAjB,EAAoBnE,CAApB,EAAuBqE,CAAvB,IAA4B,EAA5B,GAAiCD,CAAxC;AACb,WAAON,EAAE8C,SAAF,CAAazC,IAAE,CAAF,GAAIE,CAAjB,EAAoB,CAApB,EAAuBrE,CAAvB,EAA0BqE,CAA1B,IAA+B,EAA/B,GAAoCrE,IAAE,EAAtC,GAA2CoE,CAAlD;AACD;AAjIwB,CAA3B;;AAoIA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5IA;;;;;;;;;;;;IAEMtE,M;;;;;;;;;;EAAeY,gB;;AAGrBZ,OAAOC,MAAP,GAAgB,UAAS+G,MAAT,EAAgB;AAC9B,MAAMhK,KAAK6D,SAASC,aAAT,CAAuB,KAAvB,CAAX;AACA9D,KAAGkE,SAAH,GAAe8F,MAAf;AACA,SAAO,IAAIhH,MAAJ,CAAWhD,EAAX,CAAP;AACD,CAJD;;kBAMegD,M;;;;;;;;;;;;;;;;;;QCECiH,M,GAAAA,M;;AAbhB;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEO,SAASA,MAAT,CAAgBjK,EAAhB,EAA+B;AAAA,MAAZmB,OAAY,uEAAJ,EAAI;;AACpCA,YAAU,sBAAO,EAAP,EAAUC,kBAAV,EAAmBD,OAAnB,CAAV;;AAEA,MAAI,OAAOnB,EAAP,IAAa,QAAjB,EAA2BA,KAAK6D,SAASoB,cAAT,CAAwBjF,EAAxB,CAAL;AAC3B,MAAIA,GAAGkK,OAAH,IAAc,KAAlB,EAAyB,OAAO,IAAIC,eAAJ,CAAenK,EAAf,EAAkBmB,OAAlB,CAAP;;AAEzB,SAAO,IAAIiJ,aAAJ,CAAUpK,EAAV,EAAamB,OAAb,CAAP;AACD;;QAEQiJ,K,GAAAA,a;QAAOhJ,Q,GAAAA,kB;QAAU4E,O,GAAAA,iB;QAAS9E,O,GAAAA,iB;QAASI,I,GAAAA,c;QAAM0B,M,GAAAA,gB;QAAQI,O,GAAAA,iB;QAAS1C,M,GAAAA,gB;;;;;;;;;;;;;;;;;;;;;;ICtB7DgB,Q;AACJ,oBAAY2I,OAAZ,EAAqB;AAAA;;AACnB,SAAKA,OAAL,GAAeA,OAAf;AACA,SAAKJ,MAAL;AACD;;;;6BAEQ;AACP,UAAM/G,IAAI,KAAKmH,OAAf;AACAnH,QAAElD,EAAF,CAAK6B,gBAAL,CAAsB,OAAtB,EAA8B,UAACC,CAAD,EAAO;AACnC,YAAMyF,IAAIzF,EAAEwI,QAAF,GAAa,EAAb,GAAiB,CAA3B;AACA,gBAAOxI,EAAEjB,GAAT;AACE,eAAK,YAAL;AAAmBqC,cAAEqH,KAAF,CAAQhD,CAAR,EAAY;AAC/B,eAAK,WAAL;AAAkBrE,cAAEqH,KAAF,CAAQ,CAAChD,CAAT,EAAa;AAC/B,eAAK,SAAL;AAAgBrE,cAAEqH,KAAF,CAAQ,CAAR,EAAU,CAAChD,CAAX,EAAe;AAC/B,eAAK,WAAL;AAAkBrE,cAAEqH,KAAF,CAAQ,CAAR,EAAUhD,CAAV,EAAc;AAChC,eAAK,QAAL,CAAe,KAAK,WAAL;AAAkBrE,cAAEtB,IAAF,CAAO,aAAP,EAAuB;AACxD;AAAS4I,oBAAQC,GAAR,CAAY3I,CAAZ,EAAgB;AAN3B;AAQD,OAVD;AAWD;;;;;;kBAGYJ,Q;;;;;;;;;;;;;;;;;;;;;;ACtBf;;;;;;;;;;IAUMJ,I;AAEJ,kBAAc;AAAA;;AACZ,SAAKqB,CAAL,GAAS,CAAT;AACA,SAAKC,CAAL,GAAS,CAAT;AACA,SAAKP,CAAL,GAAS,CAAT;AACA,SAAKC,CAAL,GAAS,CAAT;AACD;;;;gCA4BW;AAAA,iBACY,CACpBvB,KAAK2J,GAAL,CAAS,KAAK/H,CAAd,EAAgB,KAAKgI,EAArB,CADoB,EAEpB5J,KAAK2J,GAAL,CAAS,KAAK9H,CAAd,EAAgB,KAAKgI,EAArB,CAFoB,EAGpB7J,KAAK8J,GAAL,CAAS,KAAKlI,CAAd,EAAgB,KAAKgI,EAArB,CAHoB,EAIpB5J,KAAK8J,GAAL,CAAS,KAAKjI,CAAd,EAAgB,KAAKgI,EAArB,CAJoB,CADZ;AAAA,UACHE,EADG;AAAA,UACAC,EADA;AAAA,UACGJ,EADH;AAAA,UACMC,EADN;;AAOV,aAAOtJ,KAAK2B,MAAL,CAAY6H,EAAZ,EAAeC,EAAf,EAAkBJ,KAAGG,EAArB,EAAwBF,KAAGG,EAA3B,CAAP;AACD;;;4BAEO1I,C,EAAEC,C,EAAG;AACX,UAAMP,OAAO,KAAKtB,SAAL,EAAb;AACA,UAAIsB,KAAKY,CAAL,GAAO,CAAX,EAAcZ,KAAKY,CAAL,GAAS,CAAT;AACd,UAAIZ,KAAKa,CAAL,GAAO,CAAX,EAAcb,KAAKa,CAAL,GAAS,CAAT;AACd,UAAIb,KAAK4I,EAAL,GAAQtI,CAAZ,EAAeN,KAAKY,CAAL,GAASN,IAAEN,KAAKM,CAAhB;AACf,UAAIN,KAAK6I,EAAL,GAAQtI,CAAZ,EAAeP,KAAKa,CAAL,GAASN,IAAEP,KAAKO,CAAhB;AACf,aAAOP,IAAP;AACD;;;sBA3CMiJ,C,EAAG;AACR,WAAK3I,CAAL,GAAS,KAAKsI,EAAL,GAAUK,CAAnB;AACA,WAAKrI,CAAL,GAASqI,CAAT;AACD;;;sBAEMA,C,EAAG;AACR,WAAK1I,CAAL,GAAS,KAAKsI,EAAL,GAAUI,CAAnB;AACA,WAAKpI,CAAL,GAASoI,CAAT;AACD;;;wBAEQ;AACP,aAAO,KAAKrI,CAAL,GAAS,KAAKN,CAArB;AACD,K;sBAEMM,C,EAAG;AACR,WAAKN,CAAL,GAASM,IAAI,KAAKA,CAAlB;AACD;;;wBAEQ;AACP,aAAO,KAAKC,CAAL,GAAS,KAAKN,CAArB;AACD,K;sBAEMM,C,EAAG;AACR,WAAKN,CAAL,GAASM,IAAI,KAAKA,CAAlB;AACD;;;;;;AAsBHtB,KAAK2J,YAAL,GAAoB,UAASC,EAAT,EAAYC,EAAZ,EAAe;AAAA,cACX,CACpBpK,KAAK2J,GAAL,CAASQ,GAAG,CAAH,CAAT,EAAeC,GAAG,CAAH,CAAf,CADoB,EAEpBpK,KAAK2J,GAAL,CAASQ,GAAG,CAAH,CAAT,EAAeC,GAAG,CAAH,CAAf,CAFoB,EAGpBpK,KAAK8J,GAAL,CAASK,GAAG,CAAH,CAAT,EAAeC,GAAG,CAAH,CAAf,CAHoB,EAIpBpK,KAAK8J,GAAL,CAASK,GAAG,CAAH,CAAT,EAAeC,GAAG,CAAH,CAAf,CAJoB,CADW;AAAA,MAC1BL,EAD0B;AAAA,MACvBC,EADuB;AAAA,MACpBJ,EADoB;AAAA,MACjBC,EADiB;;AAOjC,SAAOtJ,KAAK2B,MAAL,CAAY6H,EAAZ,EAAeC,EAAf,EAAkBJ,KAAGG,EAArB,EAAwBF,KAAGG,EAA3B,CAAP;AACD,CARD;;AAUAzJ,KAAK2B,MAAL,GAAc,YAA0B;AAAA,MAAjBN,CAAiB,uEAAf,CAAe;AAAA,MAAbC,CAAa,uEAAX,CAAW;AAAA,MAATP,CAAS,uEAAP,CAAO;AAAA,MAALC,CAAK,uEAAH,CAAG;;AACtC,MAAMY,IAAI,IAAI5B,IAAJ,EAAV;AACA4B,IAAEP,CAAF,GAAMA,CAAN;AACAO,IAAEN,CAAF,GAAMA,CAAN;AACAM,IAAEb,CAAF,GAAMA,CAAN;AACAa,IAAEZ,CAAF,GAAMA,CAAN;AACA,SAAOY,CAAP;AACD,CAPD;;AASA5B,KAAKrB,IAAL,GAAY,UAASD,EAAT,EAAY;AACtB,MAAMkD,IAAI,IAAI5B,IAAJ,EAAV;AACA4B,IAAEP,CAAF,GAAM3C,GAAGoL,UAAT;AACAlI,IAAEN,CAAF,GAAM5C,GAAGqL,SAAT;AACAnI,IAAEb,CAAF,GAAMrC,GAAGwC,WAAT;AACAU,IAAEZ,CAAF,GAAMtC,GAAGyC,YAAT;AACA,SAAOS,CAAP;AACD,CAPD;;kBASe5B,I;;;;;;;;;;;;;;;;;;;;AC7Ff;;;;AACA;;;;;;;;;;;;IAEMgK,O;AACJ,mBAAYtL,EAAZ,EAAgB;AAAA;;AACd,QAAI,OAAOA,EAAP,IAAa,QAAjB,EAA2BA,KAAK6D,SAASoB,cAAT,CAAwBjF,EAAxB,CAAL;AAC3B,SAAKA,EAAL,GAAUA,EAAV;AACA,SAAKuL,MAAL,GAAc,EAAd;AACD;;;;2BAEgB;AAAA;;AAAA,UAAZpK,OAAY,uEAAJ,EAAI;;AACf,WAAKmC,MAAL,GAAenC,QAAQ0D,OAAR,KAAkB6E,SAAnB,GAA+BvI,QAAQ0D,OAAvC,GAAgD,IAA9D;;AAEA,OAAC,GAAD,EAAK,GAAL,EAAS,GAAT,EAAa,GAAb,EAAkBjE,OAAlB,CACE;AAAA,eAAO,MAAK2K,MAAL,CAAY1K,GAAZ,IAAmB2K,MAAMvI,MAAN,CAAa9B,OAAb,EAAqBN,GAArB,CAA1B;AAAA,OADF;;AAIA,WAAK4K,MAAL;AACD;;;2BAEM1J,I,EAAK;AACV,UAAM2J,IAAIpK,eAAKrB,IAAL,CAAU,KAAKD,EAAf,CAAV;AACA,UAAMmJ,IAAI,KAAKoC,MAAf;AACApC,QAAE9B,CAAF,CAAI/E,CAAJ,GAAQP,KAAKa,CAAb;AACAuG,QAAEjH,CAAF,CAAIG,CAAJ,GAAQtB,KAAK4K,IAAL,CAAUD,EAAErJ,CAAF,GAAMN,KAAK4I,EAArB,CAAR;AACAxB,QAAE7B,CAAF,CAAIhF,CAAJ,GAAQoJ,EAAEpJ,CAAF,GAAMP,KAAK6I,EAAnB;AACAzB,QAAE9B,CAAF,CAAIhF,CAAJ,GAAQ8G,EAAE7B,CAAF,CAAIjF,CAAJ,GAAQtB,KAAK6K,KAAL,CAAW7J,KAAKM,CAAhB,CAAhB;AACA8G,QAAE0C,CAAF,CAAIxJ,CAAJ,GAAQ8G,EAAE9B,CAAF,CAAI1E,CAAJ,GAAQwG,EAAE7B,CAAF,CAAI3E,CAAJ,GAAQ5B,KAAK6K,KAAL,CAAW7J,KAAKY,CAAhB,CAAxB;AACD;;;6BAEO;AAAA;;AACN,UAAMwG,IAAI,KAAKoC,MAAf;AACA,OAAC,GAAD,EAAK,GAAL,EAAS,GAAT,EAAa,GAAb,EAAkB3K,OAAlB,CAA0B;AAAA,eAAOuI,EAAEtI,GAAF,EAAOiL,MAAP,CAAc,OAAK9L,EAAnB,CAAP;AAAA,OAA1B;AACD;;;8BAEQ;AACP,UAAMmJ,IAAI,KAAKoC,MAAf;AACA,OAAC,GAAD,EAAK,GAAL,EAAS,GAAT,EAAa,GAAb,EAAkB3K,OAAlB,CAA0B;AAAA,eAAOuI,EAAEtI,GAAF,EAAOkG,MAAP,EAAP;AAAA,OAA1B;AACD;;;;;;AAGHuE,QAAQrB,MAAR,GAAiB,UAASI,OAAT,EAAiB;AAChC,MAAMrK,KAAKqK,QAAQrK,EAAnB;AACA,MAAMgH,IAAI,IAAIsE,OAAJ,CAAYtL,EAAZ,CAAV;AACAgH,IAAE+E,IAAF,CAAO1B,QAAQlJ,OAAf;AACAkJ,UAAQkB,MAAR,GAAiBvE,CAAjB;AACA,SAAOA,CAAP;AACD,CAND;;IAQMwE,K;;;;;;;;;;;2BACGxL,E,EAAG;AAAEA,SAAGkF,WAAH,CAAe,KAAKlF,EAApB;AAA0B;;;6BAC9B;AAAE,WAAKA,EAAL,CAAQoC,aAAR,CAAsB4J,WAAtB,CAAkC,KAAKhM,EAAvC;AAA6C;;;sBAEjDqC,C,EAAG;AAAE,WAAKrC,EAAL,CAAQuD,KAAR,CAAcG,KAAd,GAAsBrB,IAAI,IAA1B;AAAiC;;;sBACtCC,C,EAAG;AAAE,WAAKtC,EAAL,CAAQuD,KAAR,CAAcI,MAAd,GAAuBrB,IAAI,IAA3B;AAAkC;;;sBACvCuJ,C,EAAG;AAAE,WAAK7L,EAAL,CAAQuD,KAAR,CAAcE,IAAd,GAAqBoI,IAAI,IAAzB;AAAgC;;;;EANzBjI,gB;;AASpB4H,MAAMvI,MAAN,GAAe,UAASgJ,CAAT,EAAWpL,GAAX,EAAgB;AAC7B,MAAMb,KAAK6D,SAASC,aAAT,CAAuB,KAAvB,CAAX;AACA,MAAMkG,SAASiC,EAAEnH,UAAF,IAAgB,OAA/B;AACA,MAAImH,EAAElH,UAAN,EAAkB/E,GAAGuD,KAAH,CAAS2I,eAAT,GAA2BD,EAAElH,UAA7B;AAClB,MAAIkH,EAAEjH,YAAN,EAAoBhF,GAAGuD,KAAH,CAAS4I,OAAT,GAAmBF,EAAEjH,YAArB;AACpBhF,KAAGkE,SAAH,GAAkB8F,MAAlB,SAA4BnJ,GAA5B;AACA,SAAO,IAAI2K,KAAJ,CAAUxL,EAAV,CAAP;AACD,CAPD;;AASAwL,MAAMF,OAAN,GAAgBA,OAAhB;;kBAEeE,K;;;;;;;;;;;;;;;;;;;;ACrEf;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;IAEMpB,K;AACJ,iBAAYpK,EAAZ,EAAemB,OAAf,EAAwB;AAAA;;AACtB,QAAI,OAAOnB,EAAP,IAAa,QAAjB,EAA2BA,KAAK6D,SAASoB,cAAT,CAAwBjF,EAAxB,CAAL;AAC3B,SAAKmB,OAAL,GAAe,sBAAO,EAAP,EAAU6C,kBAAV,EAAmB7C,OAAnB,CAAf;AACA,SAAKnB,EAAL,GAAUA,EAAV;AACA,SAAKoM,KAAL,GAAa,IAAIC,GAAJ,EAAb;AACA,SAAK/I,MAAL,GAAc,IAAd;AACA,SAAKyI,IAAL;AACD;;;;2BAEM;AACL,WAAKO,aAAL;AACA,WAAKC,aAAL;AACAf,sBAAMF,OAAN,CAAcrB,MAAd,CAAqB,IAArB;AACAO,cAAQgC,IAAR,CAAa,yBAAb;AACD;;;gCAEW;AACV,UAAMC,IAAI,KAAKL,KAAL,CAAWM,IAArB;AACA,UAAMT,IAAI,KAAK9K,OAAf;AACA,UAAK8K,EAAE5H,WAAF,KAAgB,IAAjB,IAA2BoI,KAAKR,EAAE5H,WAAtC,EAAoD,OAAO,KAAP;AACpD,UAAI,CAAC4H,EAAE7H,KAAH,IAAaqI,KAAKR,EAAE3H,WAAxB,EAAsC;AACpCkG,gBAAQgC,IAAR,CAAa,KAAb;AACA,eAAO,KAAP;AACD;AACD,aAAO,IAAP;AACD;;;gCAEW;AACV,UAAMC,IAAI,KAAKL,KAAL,CAAWM,IAArB;AACA,UAAMT,IAAI,KAAK9K,OAAf;AACA,UAAI,KAAKmC,MAAL,IAAe,CAAC,KAAKA,MAAL,CAAYnC,OAAZ,CAAoBuD,SAAxC,EAAmD,OAAO,KAAP;AACnD,UAAI,CAACuH,EAAEvH,SAAH,IAAiB+H,KAAKR,EAAE3H,WAA5B,EAA0C,OAAO,KAAP;AAC1C,aAAO,IAAP;AACD;;;oCAEe;AAAA;;AACd,UAAIqI,IAAJ,EAAUtL,GAAV,EAAegB,CAAf,EAAkBC,CAAlB;AACA,6BAAQ,KAAKtC,EAAb,EACE,UAAC2C,CAAD,EAAGC,CAAH,EAAKd,CAAL,EAAW;AACT,YAAI,CAAC,MAAK8K,SAAL,EAAL,EAAuB,OAAO,KAAP;AACvBD,eAAOzL,kBAAQ+B,MAAR,EAAP;AACA5B,cAAMsL,KAAKtL,GAAX;AACAA,YAAIsB,CAAJ,GAAQb,EAAEyE,KAAF,GAAU,MAAKvG,EAAL,CAAQ6M,YAAR,CAAqBzB,UAA/B,GAA4C,MAAKpL,EAAL,CAAQoL,UAA5D;AACA/J,YAAIuB,CAAJ,GAAQd,EAAE0E,KAAF,GAAU,MAAKxG,EAAL,CAAQ6M,YAAR,CAAqBxB,SAA/B,GAA2C,MAAKrL,EAAL,CAAQqL,SAA3D;AACAhJ,YAAI,MAAKrC,EAAL,CAAQwC,WAAZ;AACAF,YAAI,MAAKtC,EAAL,CAAQyC,YAAZ;AACAkK,aAAK1K,MAAL,CAAYZ,GAAZ;AACA,cAAKyL,UAAL,CAAgBH,IAAhB;AACAA,aAAK3M,EAAL,CAAQ0C,KAAR;AACA,eAAO,IAAP;AACD,OAbH,EAcE,UAACC,CAAD,EAAGC,CAAH,EAAS;AACPvB,YAAIsJ,EAAJ,GAAStJ,IAAIsB,CAAJ,GAAQA,CAAjB;AACAtB,YAAIuJ,EAAJ,GAASvJ,IAAIuB,CAAJ,GAAQA,CAAjB;AACA,YAAIvB,IAAIsJ,EAAJ,GAAS,CAAb,EAAgBtJ,IAAIsJ,EAAJ,GAAS,CAAT;AAChB,YAAItJ,IAAIuJ,EAAJ,GAAS,CAAb,EAAgBvJ,IAAIuJ,EAAJ,GAAS,CAAT;AAChB,YAAIvJ,IAAIsJ,EAAJ,GAAStI,CAAb,EAAgBhB,IAAIsJ,EAAJ,GAAStI,CAAT;AAChB,YAAIhB,IAAIuJ,EAAJ,GAAStI,CAAb,EAAgBjB,IAAIuJ,EAAJ,GAAStI,CAAT;AAChBqK,aAAK1K,MAAL,CAAYZ,IAAIZ,SAAJ,EAAZ;AACD,OAtBH,EAuBE,YAAM,CAAG,CAvBX;AAyBD;;;oCAEe;AAAA;;AACd,WAAKT,EAAL,CAAQ6B,gBAAR,CAAyB,eAAzB,EAAyC,UAACC,CAAD,EAAO;AAC9C,eAAKiL,QAAL,CAAcjL,EAAEyD,UAAhB;AACD,OAFD,EAEE,KAFF;AAGA,WAAKvF,EAAL,CAAQ6B,gBAAR,CAAyB,aAAzB,EAAuC,UAACC,CAAD,EAAO;AAC5C,YAAMkL,OAAOlL,EAAEyD,UAAf;AACA,YAAKyH,SAAS,OAAK1J,MAAf,IAA0B0J,KAAK7L,OAAL,CAAa0D,OAA3C,EACE,OAAK0G,MAAL,CAAY0B,MAAZ,CAAmBD,KAAK3L,GAAxB;AACH,OAJD,EAIE,KAJF;AAKA,WAAKrB,EAAL,CAAQ6B,gBAAR,CAAyB,aAAzB,EAAuC,UAASC,CAAT,EAAW;AAChD0I,gBAAQgC,IAAR,CAAa,kBAAb;AACD,OAFD;AAGA,WAAKxM,EAAL,CAAQ6B,gBAAR,CAAyB,aAAzB,EAAuC,UAACC,CAAD,EAAO;AAC5C,eAAKoL,aAAL,CAAmBpL,EAAEyD,UAArB;AACD,OAFD;AAGD;;;sCAEiB;AAAA;;AAChB,UAAI4H,IAAI,IAAR;AACA,WAAKf,KAAL,CAAWxL,OAAX,CAAmB,gBAAQ;AACzB+L,aAAK3M,EAAL,CAAQuD,KAAR,CAAc6J,MAAd,GAAuBD,GAAvB;AACA,YAAI,OAAK7J,MAAL,KAAgBqJ,IAApB,EAA0BA,KAAKU,QAAL,CAAc,QAAd,EAA1B,KACOV,KAAKW,WAAL,CAAiB,QAAjB;AACR,OAJD;AAKA,WAAKC,OAAL;AACD;;;6BAEQlD,O,EAAS;AAChBA,gBAAUA,WAAWmD,MAAMvN,IAAN,CAAW,KAAKmM,KAAhB,EAAuBqB,GAAvB,EAArB;AACA,UAAIpD,OAAJ,EAAa;AACX,aAAKkB,MAAL,CAAYE,MAAZ;AACA,aAAKnI,MAAL,GAAc+G,OAAd;AACA,aAAK+B,KAAL,CAAWsB,MAAX,CAAkBrD,OAAlB;AACA,aAAK+B,KAAL,CAAWuB,GAAX,CAAetD,OAAf;AACA,aAAKuD,eAAL;AACA,aAAKtK,MAAL,CAAYtD,EAAZ,CAAe0C,KAAf;AACD,OAPD,MAOO;AACL,aAAK6I,MAAL,CAAYsC,OAAZ;AACD;AACD,aAAO,IAAP;AACD;;;+BAEUxD,O,EAAS;AAClBA,cAAQyD,aAAR,CAAsB,IAAtB;AACAzD,cAAQlH,QAAR,CAAiB,KAAKnD,EAAtB;AACAqK,cAAQ0B,IAAR;AACA,WAAKgB,QAAL,CAAc1C,OAAd;AACA,aAAO,IAAP;AACD;;;kCAEaA,O,EAAS;AACrB,UAAI,CAAC,KAAK3F,SAAL,EAAL,EAAuB,OAAO,KAAP;AACvB2F,cAAQrK,EAAR,CAAW+G,MAAX;AACA,WAAKqF,KAAL,CAAWsB,MAAX,CAAkBrD,OAAlB;AACA,WAAK0C,QAAL;AACD;;;8BAES;AACR,WAAK5L,OAAL,CAAa0D,OAAb,IAAwB,KAAKvB,MAA7B,IAAuC,KAAKiI,MAAL,CAAY0B,MAAZ,CAAmB,KAAK3J,MAAL,CAAYjC,GAA/B,CAAvC;AACD;;;;;;kBAGY+I,K;;;;;;;;;;;;;;;;;;;;ACrIf;;AACA;;;;;;;;;;;;IAEMD,U;;;AACJ,sBAAYnK,EAAZ,EAAemB,OAAf,EAAwB;AAAA;;AACtB,QAAM4M,UAAU,cAAI,sBAAJ,CAAhB;AACA/N,OAAGgO,UAAH,CAAcC,YAAd,CAA2BF,OAA3B,EAAoC/N,EAApC;AACA+N,YAAQ7I,WAAR,CAAoBlF,EAApB;;AAHsB,wHAIhB+N,OAJgB,EAIR5M,OAJQ;;AAKtB,UAAK+M,KAAL,GAAalO,EAAb;AACAA,OAAGmO,MAAH,GAAY,MAAKC,aAAL,CAAmBC,IAAnB,OAAZ;AACA,UAAKD,aAAL;AACA5D,YAAQC,GAAR,CAAY,cAAZ;AARsB;AASvB;;;;oCAEe;AACd,UAAMpI,IAAI,KAAK6L,KAAL,CAAWxK,KAArB;AACA,UAAMpB,IAAI,KAAK4L,KAAL,CAAWvK,MAArB;AACA,WAAK3D,EAAL,CAAQuD,KAAR,CAAcG,KAAd,GAAsBrB,IAAE,IAAxB;AACA,WAAKrC,EAAL,CAAQuD,KAAR,CAAcI,MAAd,GAAuBrB,IAAE,IAAzB;AACA,WAAKiL,OAAL;AACD;;;;EAlBsBnD,a;;kBAqBVD,U;;;;;;;;;;;;;;;;;;;;qjBCxBf;;;AAGA;;;;;;;;IAEM/G,O;AAEJ,mBAAYrB,IAAZ,EAAiBM,CAAjB,EAAmBC,CAAnB,EAAqBgM,GAArB,EAA0B;AAAA;;AACxB,SAAKC,EAAL,GAAUlM,CAAV;AACA,SAAKmM,EAAL,GAAUlM,CAAV;AACA,SAAKP,IAAL,GAAYA,IAAZ;AACA,SAAK0M,MAAL,GAAc,KAAKC,cAAL,CAAoB,KAAKC,iBAAL,CAAuBL,GAAvB,CAApB,CAAd;AACA,SAAKM,KAAL,GAAa,KAAKF,cAAL,CAAoBJ,GAApB,CAAb;AACD;;;;yBAEI3L,C,EAAEC,C,EAAG;AACR,aAAOtB,eAAK2J,YAAL,CAAkB,KAAKwD,MAAvB,EAA+B,KAAKI,mBAAL,CAAyBlM,CAAzB,EAA2BC,CAA3B,CAA/B,CAAP;AACD;;;wCAEmBwD,E,EAAGC,E,EAAI;AAAA,kCACN,KAAKuI,KADC;AAAA,UAClBE,EADkB;AAAA,UACfC,EADe;AAAA,UACZC,EADY;;AAEzB,UAAIrM,IAAKmM,OAAO,IAAR,GAAeE,EAAf,GAAmBF,KAAK1I,EAAhC;AACA,UAAIxD,IAAKmM,OAAO,IAAR,GAAeC,EAAf,GAAmBD,KAAK1I,EAAhC;AACA,UAAI1D,IAAE,KAAK4L,EAAX,EAAe5L,IAAI,KAAK4L,EAAT;AACf,UAAI3L,IAAE,KAAK4L,EAAX,EAAe5L,IAAI,KAAK4L,EAAT;AACf,UAAI7L,IAAE,CAAN,EAASA,IAAI,CAAJ;AACT,UAAIC,IAAE,CAAN,EAASA,IAAI,CAAJ;AACT,aAAO,CAACD,CAAD,EAAGC,CAAH,CAAP;AACD;;;mCAEcN,C,EAAG;AAChB,UAAMhC,IAAI,KAAKyB,IAAf;AACA,cAAOO,CAAP;AACE,aAAK,GAAL;AAAW,iBAAO,CAAE,IAAF,EAAQhC,EAAEsC,CAAV,EAActC,EAAEqC,CAAhB,CAAP;AACX,aAAK,GAAL;AAAW,iBAAO,CAAE,IAAF,EAAQrC,EAAEsK,EAAV,EAActK,EAAEqK,EAAhB,CAAP;AACX,aAAK,GAAL;AAAW,iBAAO,CAAErK,EAAEqK,EAAJ,EAAQ,IAAR,EAAcrK,EAAEsK,EAAhB,CAAP;AACX,aAAK,GAAL;AAAW,iBAAO,CAAEtK,EAAEqC,CAAJ,EAAQ,IAAR,EAAcrC,EAAEsC,CAAhB,CAAP;AACX,aAAK,IAAL;AAAW,iBAAO,CAAEtC,EAAEqK,EAAJ,EAAQrK,EAAEsK,EAAV,CAAP;AACX,aAAK,IAAL;AAAW,iBAAO,CAAEtK,EAAEqC,CAAJ,EAAQrC,EAAEsK,EAAV,CAAP;AACX,aAAK,IAAL;AAAW,iBAAO,CAAEtK,EAAEqK,EAAJ,EAAQrK,EAAEsC,CAAV,CAAP;AACX,aAAK,IAAL;AAAW,iBAAO,CAAEtC,EAAEqC,CAAJ,EAAQrC,EAAEsC,CAAV,CAAP;AARb;AAUD;;;sCAEiBN,C,EAAG;AACnB,cAAOA,CAAP;AACE,aAAK,GAAL;AAAW,iBAAO,IAAP;AACX,aAAK,GAAL;AAAW,iBAAO,IAAP;AACX,aAAK,GAAL;AAAW,iBAAO,IAAP;AACX,aAAK,GAAL;AAAW,iBAAO,IAAP;AACX,aAAK,IAAL;AAAW,iBAAO,IAAP;AACX,aAAK,IAAL;AAAW,iBAAO,IAAP;AACX,aAAK,IAAL;AAAW,iBAAO,IAAP;AACX,aAAK,IAAL;AAAW,iBAAO,IAAP;AARb;AAUD;;;;;;AAIHc,QAAQH,MAAR,GAAiB,UAASlB,IAAT,EAAcM,CAAd,EAAgBC,CAAhB,EAAkBgM,GAAlB,EAAsB;AACrC,SAAO,IAAIlL,OAAJ,CAAYrB,IAAZ,EAAiBM,CAAjB,EAAmBC,CAAnB,EAAqBgM,GAArB,CAAP;AACD,CAFD;;kBAIelL,O;;;;;;;;;;;;;;;;;;;;AC/DR,IAAM6L,sBAAO,SAAPA,IAAO,CAACC,MAAD,EAAmD;AAAA,MAA1CnB,OAA0C,uEAAlClK,SAASC,aAAT,CAAuB,KAAvB,CAAkC;;AACrE,+BAAKoL,OAAOC,UAAZ,GAAyBvO,OAAzB,CAAiC;AAAA,WAASmN,QAAQ7I,WAAR,CAAoBkK,KAApB,CAAT;AAAA,GAAjC;AACAF,SAAOhK,WAAP,CAAmB6I,OAAnB;AACA,SAAOA,OAAP;AACD,CAJM;;AAMA,IAAMsB,oBAAM,SAANA,GAAM,CAACrF,MAAD,EAA6C;AAAA,MAArChK,EAAqC,uEAAlC6D,SAASC,aAAT,CAAuB,KAAvB,CAAkC;;AAC9D9D,KAAGkE,SAAH,GAAe8F,MAAf;AACA,SAAOhK,EAAP;AACD,CAHM;;AAKA,IAAMsP,4BAAU,SAAVA,OAAU,CAACC,IAAD,EAAOL,MAAP,EAAkB;AACvCK,OAAKnN,aAAL,CAAmBoN,YAAnB,CAAgCN,MAAhC,EAAuCK,IAAvC;AACA,SAAOL,MAAP;AACD,CAHM,C;;;;;;;;;;;;;;;;;kBCXiBO,M;AAAT,SAASA,MAAT,GAAkB;AAC/B,MAAIC,WAAW,EAAf;;AAEA,OAAI,IAAI7O,GAAR,IAAe8O,SAAf,EAA0B;AACxB,QAAIC,WAAWD,UAAU9O,GAAV,CAAf;AACA,SAAK,IAAIgP,IAAT,IAAiBD,QAAjB,EAA2B;AACzB,UAAIE,OAAOC,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCL,QAArC,EAA+CC,IAA/C,CAAJ,EAA0D;AACxDH,iBAASG,IAAT,IAAiBD,SAASC,IAAT,CAAjB;AACD;AACF;AACF;;AAED,SAAOH,QAAP;AACD,E","file":"jcrop.dev.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./build/js/jcrop.js\");\n","import Easing from './easing';\n\nfunction Animate(el,from,to,cb,frames=30,easingFunc='swing') {\n  const p = ['x','y','w','h'];\n  const delta = {};\n  const cur = from.normalize();\n  easingFunc = (typeof easingFunc == 'string')? Easing[easingFunc] : easingFunc;\n\n  var cur_frame = 0;\n\n  p.forEach(key => delta[key] = (to[key] - from[key]) / frames);\n\n  function step() {\n\n    if (cur_frame < frames) {\n\n      p.forEach(key => \n        cur[key] = Math.round(\n          easingFunc(cur_frame, from[key], to[key] - from[key], frames)\n        )\n      );\n\n      cb(cur);\n      cur_frame++;\n      requestAnimationFrame(step);\n    }\n  }\n\n  requestAnimationFrame(step);\n}\n\nexport default Animate;\n","import extend from './util/extend';\nimport Handle from './handle';\nimport Defaults from './defaults';\nimport Dragger from './dragger';\nimport Rect from './rect';\nimport Sticker from './sticker';\nimport DomObj from './domobj';\nimport Keyboard from './keyboard';\nimport Animate from './animate';\n\nclass Cropper extends DomObj {\n\n  constructor(el,options={}) {\n    super(el);\n    this.options = extend({},Cropper.defaults,options);\n    this.pos = Rect.from(this.el);\n  }\n\n  init() {\n    this.createHandles();\n    this.createMover();\n    this.attachFocus();\n    new Keyboard(this);\n    return this;\n  }\n\n  attachToStage(stage) {\n    this.stage = stage;\n    this.emit('crop.attach');\n  }\n\n  attachFocus() {\n    this.el.addEventListener('focus',(e) => {\n      this.emit('crop.activate');\n      this.emit('crop.update');\n    },false);\n  }\n\n  animate(rect,frames=30,efunc){\n    Animate(this.el,this.pos,rect,r => this.render(r.normalize()),frames,efunc);\n  }\n\n  createMover() {\n    const pe = this.el.parentElement;\n    var w,h;\n    this.pos = Rect.from(this.el);\n    var stick;\n    Dragger(\n      this.el,\n      () => {\n        [w,h] = [ pe.offsetWidth, pe.offsetHeight ];\n        stick = Rect.from(this.el);\n        this.el.focus();\n        this.emit('crop.activate');\n        return true;\n      },\n      (x,y) => {\n        this.pos.x = stick.x + x;\n        this.pos.y = stick.y + y;\n        this.render(this.pos.rebound(w,h));\n      },\n      () => { }\n    )\n  }\n\n  nudge(x=0,y=0) {\n    const pe = this.el.parentElement;\n    const [w,h] = [ pe.offsetWidth, pe.offsetHeight ];\n    if (x) this.pos.x += x;\n    if (y) this.pos.y += y;\n    this.render(this.pos.rebound(w,h));\n  }\n\n  createHandles() {\n    this.options.handles.forEach(c => {\n      const handle = Handle.create('handle '+c);\n      const pe = this.el.parentElement;\n      const [w,h] = [ pe.offsetWidth, pe.offsetHeight ];\n      handle.appendTo(this.el);\n\n      var stick;\n      Dragger(handle.el,\n        () => {\n          stick = Sticker.create(Rect.from(this.el), w, h, c);\n          this.el.focus();\n          this.emit('crop.active');\n          return true;\n        },\n        (x,y) => this.render(stick.move(x,y)),\n        () => { }\n      );\n    });\n    return this;\n  }\n\n  isActive() {\n    return (this.stage && (this.stage.active === this));\n  }\n\n  render(r) {\n    r = r || this.pos;\n    this.el.style.top = r.y + 'px';\n    this.el.style.left = r.x + 'px';\n    this.el.style.width = r.w + 'px';\n    this.el.style.height = r.h + 'px';\n    this.pos = r;\n    this.emit('crop.update');\n    return this;\n  }\n\n  doneDragging() {\n    this.pos = Rect.from(this.el);\n  }\n\n}\n\nCropper.create = function(options={}){\n  const el = document.createElement('div');\n  const opts = extend({},Defaults,options);\n  el.setAttribute('tabindex','0');\n  el.className = opts.cropperClass || 'cropper';\n  return new Cropper(el,opts);\n};\n\nexport default Cropper;\n","export default {\n  multi: true,\n  maxCroppers: null,\n  minCroppers: 1,\n  cropperClass: 'cropper',\n  canDrag: true,\n  canResize: true,\n  canSelect: true,\n  canRemove: true,\n  multiple: false,\n  autoFront: true,\n  active: true,\n  handles: ['n','s','e','w','sw','nw','ne','se'],\n  shading: true,\n  shadeClass: 'shade',\n  shadeColor: 'black',\n  shadeOpacity: 0.5,\n  x: 0,\n  y: 0,\n  w: 100,\n  h: 100\n};\n\n","class DomObj {\n\n  constructor(el) {\n    if (typeof el == 'string') el = document.getElementById(el);\n    this.el = el;\n  }\n\n  appendTo(el) {\n    if (typeof el == 'string') el = document.getElementById(el);\n    el.appendChild(this.el);\n    return this;\n  }\n\n  emit(evname) {\n    const ev = document.createEvent('Event');\n    ev.initEvent(evname, true, true);\n    ev.cropTarget = this;\n    this.el.dispatchEvent(ev);\n  }\n\n  removeClass(cl) {\n    this.el.className = this.el.className\n      .split(' ').filter(i => cl != i).join(' ');\n    return this;\n  }\n\n  hasClass(cl) {\n    return this.el.className.split(' ').filter(i => cl == i).length;\n  }\n\n  addClass(cl) {\n    if (!this.hasClass(cl)) this.el.className += ' ' + cl;\n  }\n\n}\n\nexport default DomObj;\n\n","/*\n  Dragger function - sets up dragging callbacks on an element\n*/\n\nconst Dragger = function(el,startcb,movecb,donecb){\n  var ox, oy;\n  if (typeof el == 'string') el = document.getElementById(el);\n\n  el.addEventListener('mousedown',start);\n  el.addEventListener('touchstart',start);\n\n  function start(e) {\n    ox = e.pageX;\n    oy = e.pageY;\n\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (!startcb(ox,oy,e)) return;\n\n    if (e.type == 'mousedown') {\n      window.addEventListener('mousemove',move);\n      document.addEventListener('mouseup',done);\n    }\n    else if (e.type == 'touchstart') {\n      document.addEventListener('touchmove',move);\n      document.addEventListener('touchend',done);\n    }\n  }\n\n  function move(e) {\n    e.preventDefault();\n    e.stopPropagation();\n\n    movecb(e.pageX - ox,e.pageY - oy);\n  }\n\n  function done(e) {\n    if (e.pageX && e.pageY)\n      movecb(e.pageX - ox,e.pageY - oy);\n\n    document.removeEventListener('mouseup',done);\n    window.removeEventListener('mousemove',move);\n    document.removeEventListener('touchmove',move);\n    document.removeEventListener('touchend',done);\n\n    donecb();\n  }\n\n  function remove() {\n    el.removeEventListener('mousedown',start);\n    el.removeEventListener('touchstart',start);\n  }\n\n  return { remove };\n}\n\nexport default Dragger;\n","/* ============================================================\n * Easing functions adapted from jQuery easing library\n * Open source under the BSD License.\n *\n * Copyright © 2008 George McGinley Smith\n * All rights reserved.\n * ======================================================== */\n\nconst m = module.exports = {\n  // t: current time, b: begInnIng value, c: change In value, d: duration\n  def: 'outQuad',\n  swing: function (t, b, c, d) {\n    return m[m.def](t, b, c, d);\n  },\n  inQuad: function (t, b, c, d) {\n    return c*(t/=d)*t + b;\n  },\n  outQuad: function (t, b, c, d) {\n    return -c *(t/=d)*(t-2) + b;\n  },\n  inOutQuad: function (t, b, c, d) {\n    if ((t/=d/2) < 1) return c/2*t*t + b;\n    return -c/2 * ((--t)*(t-2) - 1) + b;\n  },\n  inCubic: function (t, b, c, d) {\n    return c*(t/=d)*t*t + b;\n  },\n  outCubic: function (t, b, c, d) {\n    return c*((t=t/d-1)*t*t + 1) + b;\n  },\n  inOutCubic: function (t, b, c, d) {\n    if ((t/=d/2) < 1) return c/2*t*t*t + b;\n    return c/2*((t-=2)*t*t + 2) + b;\n  },\n  inQuart: function (t, b, c, d) {\n    return c*(t/=d)*t*t*t + b;\n  },\n  outQuart: function (t, b, c, d) {\n    return -c * ((t=t/d-1)*t*t*t - 1) + b;\n  },\n  inOutQuart: function (t, b, c, d) {\n    if ((t/=d/2) < 1) return c/2*t*t*t*t + b;\n    return -c/2 * ((t-=2)*t*t*t - 2) + b;\n  },\n  inQuint: function (t, b, c, d) {\n    return c*(t/=d)*t*t*t*t + b;\n  },\n  outQuint: function (t, b, c, d) {\n    return c*((t=t/d-1)*t*t*t*t + 1) + b;\n  },\n  inOutQuint: function (t, b, c, d) {\n    if ((t/=d/2) < 1) return c/2*t*t*t*t*t + b;\n    return c/2*((t-=2)*t*t*t*t + 2) + b;\n  },\n  inSine: function (t, b, c, d) {\n    return -c * Math.cos(t/d * (Math.PI/2)) + c + b;\n  },\n  outSine: function (t, b, c, d) {\n    return c * Math.sin(t/d * (Math.PI/2)) + b;\n  },\n  inOutSine: function (t, b, c, d) {\n    return -c/2 * (Math.cos(Math.PI*t/d) - 1) + b;\n  },\n  inExpo: function (t, b, c, d) {\n    return (t==0) ? b : c * Math.pow(2, 10 * (t/d - 1)) + b;\n  },\n  outExpo: function (t, b, c, d) {\n    return (t==d) ? b+c : c * (-Math.pow(2, -10 * t/d) + 1) + b;\n  },\n  inOutExpo: function (t, b, c, d) {\n    if (t==0) return b;\n    if (t==d) return b+c;\n    if ((t/=d/2) < 1) return c/2 * Math.pow(2, 10 * (t - 1)) + b;\n    return c/2 * (-Math.pow(2, -10 * --t) + 2) + b;\n  },\n  inCirc: function (t, b, c, d) {\n    return -c * (Math.sqrt(1 - (t/=d)*t) - 1) + b;\n  },\n  outCirc: function (t, b, c, d) {\n    return c * Math.sqrt(1 - (t=t/d-1)*t) + b;\n  },\n  inOutCirc: function (t, b, c, d) {\n    if ((t/=d/2) < 1) return -c/2 * (Math.sqrt(1 - t*t) - 1) + b;\n    return c/2 * (Math.sqrt(1 - (t-=2)*t) + 1) + b;\n  },\n  inElastic: function (t, b, c, d) {\n    var s=1.70158;var p=0;var a=c;\n    if (t==0) return b;  if ((t/=d)==1) return b+c;  if (!p) p=d*.3;\n    if (a < Math.abs(c)) { a=c; var s=p/4; }\n    else var s = p/(2*Math.PI) * Math.asin (c/a);\n    return -(a*Math.pow(2,10*(t-=1)) * Math.sin( (t*d-s)*(2*Math.PI)/p )) + b;\n  },\n  outElastic: function (t, b, c, d) {\n    var s=1.70158;var p=0;var a=c;\n    if (t==0) return b;  if ((t/=d)==1) return b+c;  if (!p) p=d*.3;\n    if (a < Math.abs(c)) { a=c; var s=p/4; }\n    else var s = p/(2*Math.PI) * Math.asin (c/a);\n    return a*Math.pow(2,-10*t) * Math.sin( (t*d-s)*(2*Math.PI)/p ) + c + b;\n  },\n  inOutElastic: function (t, b, c, d) {\n    var s=1.70158;var p=0;var a=c;\n    if (t==0) return b;  if ((t/=d/2)==2) return b+c;  if (!p) p=d*(.3*1.5);\n    if (a < Math.abs(c)) { a=c; var s=p/4; }\n    else var s = p/(2*Math.PI) * Math.asin (c/a);\n    if (t < 1) return -.5*(a*Math.pow(2,10*(t-=1)) * Math.sin( (t*d-s)*(2*Math.PI)/p )) + b;\n    return a*Math.pow(2,-10*(t-=1)) * Math.sin( (t*d-s)*(2*Math.PI)/p )*.5 + c + b;\n  },\n  inBack: function (t, b, c, d, s) {\n    if (s == undefined) s = 1.70158;\n    return c*(t/=d)*t*((s+1)*t - s) + b;\n  },\n  outBack: function (t, b, c, d, s) {\n    if (s == undefined) s = 1.70158;\n    return c*((t=t/d-1)*t*((s+1)*t + s) + 1) + b;\n  },\n  inOutBack: function (t, b, c, d, s) {\n    if (s == undefined) s = 1.70158; \n    if ((t/=d/2) < 1) return c/2*(t*t*(((s*=(1.525))+1)*t - s)) + b;\n    return c/2*((t-=2)*t*(((s*=(1.525))+1)*t + s) + 2) + b;\n  },\n  inBounce: function (t, b, c, d) {\n    return c - m.outBounce (d-t, 0, c, d) + b;\n  },\n  outBounce: function (t, b, c, d) {\n    if ((t/=d) < (1/2.75)) {\n      return c*(7.5625*t*t) + b;\n    } else if (t < (2/2.75)) {\n      return c*(7.5625*(t-=(1.5/2.75))*t + .75) + b;\n    } else if (t < (2.5/2.75)) {\n      return c*(7.5625*(t-=(2.25/2.75))*t + .9375) + b;\n    } else {\n      return c*(7.5625*(t-=(2.625/2.75))*t + .984375) + b;\n    }\n  },\n  inOutBounce: function (t, b, c, d) {\n    if (t < d/2) return m.inBounce (t*2, 0, c, d) * .5 + b;\n    return m.outBounce (t*2-d, 0, c, d) * .5 + c*.5 + b;\n  }\n};\n\n/*\n * TERMS OF USE - EASING EQUATIONS\n * Open source under the BSD License. \n * \n * Copyright © 2001 Robert Penner All rights reserved.\n * \n * Redistribution and use in source and binary forms, with or without modification, \n * are permitted provided that the following conditions are met:\n * \n * Redistributions of source code must retain the above copyright notice,\n * this list of conditions and the following disclaimer.\n *\n * Redistributions in binary form must reproduce the above copyright\n * notice, this list of conditions and the following disclaimer in the\n * documentation and/or other materials provided with the distribution.\n * \n * Neither the name of the author nor the names of contributors may be\n * used to endorse or promote products derived from this software\n * without specific prior written permission.\n * \n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS\n * FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE\n * COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,\n * INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,\n * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED \n * AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF\n * THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. \n */\n","import DomObj from './domobj';\n\nclass Handle extends DomObj {\n}\n\nHandle.create = function(clname){\n  const el = document.createElement('div');\n  el.className = clname;\n  return new Handle(el);\n};\n\nexport default Handle;\n","import extend from './util/extend';\nimport defaults from './defaults';\nimport Stage from './stage/dom';\nimport ImageStage from './stage/image';\nimport Cropper from './cropper';\nimport Shade from './shade';\nimport Handle from './handle';\nimport Dragger from './dragger';\nimport Rect from './rect';\nimport Sticker from './sticker';\nimport DomObj from './domobj';\nimport Easing from './easing';\n\nexport function attach(el,options={}) {\n  options = extend({},defaults,options);\n\n  if (typeof el == 'string') el = document.getElementById(el);\n  if (el.tagName == 'IMG') return new ImageStage(el,options);\n\n  return new Stage(el,options);\n}\n\nexport { Stage, defaults, Dragger, Cropper, Rect, Handle, Sticker, Easing };\n\n","class Keyboard {\n  constructor(cropper) {\n    this.cropper = cropper;\n    this.attach();\n  }\n\n  attach() {\n    const c = this.cropper;\n    c.el.addEventListener('keyup',(e) => {\n      const d = e.shiftKey ? 10: 1;\n      switch(e.key) {\n        case 'ArrowRight': c.nudge(d); break;\n        case 'ArrowLeft': c.nudge(-d); break;\n        case 'ArrowUp': c.nudge(0,-d); break;\n        case 'ArrowDown': c.nudge(0,d); break;\n        case 'Delete': case 'Backspace': c.emit('crop.remove'); break;\n        default: console.log(e); break;\n      }\n    });\n  }\n}\n\nexport default Keyboard;\n","/* Rect class -- describes a rectangle with two points, usually\n   top left and bottom right. It allows the second set of coordinates\n   to be described as either w/h or x2/y2 and allows getting and\n   setting of those values such that the object values will always be\n   consistent with the latest input. It should be noted that it does not\n   attempt to keep these points normalized. That is, you should expect\n   to see the actual w/h properties to sometimes be negative values.\n   To normalize the values, use the normalize method, which will return\n   a new Rect object with normalized values.\n*/\nclass Rect {\n\n  constructor() {\n    this.x = 0;\n    this.y = 0;\n    this.w = 0;\n    this.h = 0;\n  }\n\n  set x1(v) {\n    this.w = this.x2 - v;\n    this.x = v;\n  }\n\n  set y1(v) {\n    this.h = this.y2 - v;\n    this.y = v;\n  }\n\n  get x2() {\n    return this.x + this.w;\n  }\n\n  set x2(x) {\n    this.w = x - this.x;\n  }\n\n  get y2() {\n    return this.y + this.h;\n  }\n\n  set y2(y) {\n    this.h = y - this.y;\n  }\n\n  normalize() {\n    const [x1,y1,x2,y2] = [\n      Math.min(this.x,this.x2),\n      Math.min(this.y,this.y2),\n      Math.max(this.x,this.x2),\n      Math.max(this.y,this.y2)\n    ];\n    return Rect.create(x1,y1,x2-x1,y2-y1);\n  }\n\n  rebound(w,h) {\n    const rect = this.normalize();\n    if (rect.x<0) rect.x = 0;\n    if (rect.y<0) rect.y = 0;\n    if (rect.x2>w) rect.x = w-rect.w;\n    if (rect.y2>h) rect.y = h-rect.h;\n    return rect;\n  }\n}\n\nRect.fromCoordSet = function(p1,p2){\n  const [x1,y1,x2,y2] = [\n    Math.min(p1[0],p2[0]),\n    Math.min(p1[1],p2[1]),\n    Math.max(p1[0],p2[0]),\n    Math.max(p1[1],p2[1])\n  ];\n  return Rect.create(x1,y1,x2-x1,y2-y1);\n};\n\nRect.create = function(x=0,y=0,w=0,h=0) {\n  const c = new Rect;\n  c.x = x;\n  c.y = y;\n  c.w = w;\n  c.h = h;\n  return c;\n};\n\nRect.from = function(el){\n  const c = new Rect;\n  c.x = el.offsetLeft;\n  c.y = el.offsetTop;\n  c.w = el.offsetWidth;\n  c.h = el.offsetHeight;\n  return c;\n}\n\nexport default Rect;\n\n","import Rect from './rect';\nimport DomObj from './domobj';\n\nclass Manager {\n  constructor(el) {\n    if (typeof el == 'string') el = document.getElementById(el);\n    this.el = el;\n    this.shades = {};\n  }\n\n  init(options={}) {\n    this.active = (options.shading!==undefined)? options.shading: true;\n\n    ['t','l','r','b'].forEach(\n      key => this.shades[key] = Shade.create(options,key)\n    );\n\n    this.enable();\n  }\n  \n  adjust(rect){\n    const f = Rect.from(this.el);\n    const s = this.shades;\n    s.t.h = rect.y;\n    s.r.w = Math.ceil(f.w - rect.x2);\n    s.b.h = f.h - rect.y2;\n    s.t.w = s.b.w = Math.floor(rect.w);\n    s.l.w = s.t.x = s.b.x = Math.floor(rect.x);\n  }\n\n  enable(){\n    const s = this.shades;\n    ['t','l','r','b'].forEach(key => s[key].insert(this.el));\n  }\n\n  disable(){\n    const s = this.shades;\n    ['t','l','r','b'].forEach(key => s[key].remove());\n  }\n}\n\nManager.attach = function(cropper){\n  const el = cropper.el;\n  const m = new Manager(el);\n  m.init(cropper.options);\n  cropper.shades = m;\n  return m;\n};\n\nclass Shade extends DomObj {\n  insert(el){ el.appendChild(this.el); }\n  remove(){ this.el.parentElement.removeChild(this.el); }\n\n  set w(w) { this.el.style.width = w + 'px'; }\n  set h(h) { this.el.style.height = h + 'px'; }\n  set x(l) { this.el.style.left = l + 'px'; }\n}\n\nShade.create = function(o,key) {\n  const el = document.createElement('div');\n  const clname = o.shadeClass || 'shade';\n  if (o.shadeColor) el.style.backgroundColor = o.shadeColor;\n  if (o.shadeOpacity) el.style.opacity = o.shadeOpacity;\n  el.className = `${clname} ${key}`;\n  return new Shade(el);\n};\n\nShade.Manager = Manager;\n\nexport default Shade;\n","import extend from '../util/extend';\nimport Defaults from '../defaults';\nimport Cropper from '../cropper';\nimport Shade from '../shade';\nimport Dragger from '../dragger';\n\nclass Stage {\n  constructor(el,options) {\n    if (typeof el == 'string') el = document.getElementById(el);\n    this.options = extend({},Defaults,options);\n    this.el = el;\n    this.crops = new Set;\n    this.active = null;\n    this.init();\n  }\n\n  init() {\n    this.initListeners();\n    this.initStageDrag();\n    Shade.Manager.attach(this);\n    console.info('Jcrop initialized stage');\n  }\n\n  canCreate() {\n    const n = this.crops.size;\n    const o = this.options;\n    if ((o.maxCroppers!==null) && (n >= o.maxCroppers)) return false;\n    if (!o.multi && (n >= o.minCroppers)) {\n      console.info('huh');\n      return false;\n    }\n    return true;\n  }\n\n  canRemove() {\n    const n = this.crops.size;\n    const o = this.options;\n    if (this.active && !this.active.options.canRemove) return false;\n    if (!o.canRemove || (n <= o.minCroppers)) return false;\n    return true;\n  }\n\n  initStageDrag() {\n    var crop, pos, w, h;\n    Dragger(this.el,\n      (x,y,e) => {\n        if (!this.canCreate()) return false;\n        crop = Cropper.create();\n        pos = crop.pos;\n        pos.x = e.pageX - this.el.offsetParent.offsetLeft - this.el.offsetLeft;\n        pos.y = e.pageY - this.el.offsetParent.offsetTop - this.el.offsetTop;\n        w = this.el.offsetWidth;\n        h = this.el.offsetHeight;\n        crop.render(pos);\n        this.addCropper(crop);\n        crop.el.focus();\n        return true;\n      },\n      (x,y) => {\n        pos.x2 = pos.x + x;\n        pos.y2 = pos.y + y;\n        if (pos.x2 < 0) pos.x2 = 0;\n        if (pos.y2 < 0) pos.y2 = 0;\n        if (pos.x2 > w) pos.x2 = w;\n        if (pos.y2 > h) pos.y2 = h;\n        crop.render(pos.normalize());\n      },\n      () => { }\n    );\n  }\n\n  initListeners() {\n    this.el.addEventListener('crop.activate',(e) => {\n      this.activate(e.cropTarget);\n    },false);\n    this.el.addEventListener('crop.update',(e) => {\n      const targ = e.cropTarget;\n      if ((targ === this.active) && targ.options.shading)\n        this.shades.adjust(targ.pos);\n    },false);\n    this.el.addEventListener('crop.attach',function(e){\n      console.info('Cropper attached');\n    });\n    this.el.addEventListener('crop.remove',(e) => {\n      this.removeCropper(e.cropTarget);\n    });\n  }\n\n  reorderCroppers() {\n    var z = 1000;\n    this.crops.forEach(crop => {\n      crop.el.style.zIndex = z++;\n      if (this.active === crop) crop.addClass('active');\n        else crop.removeClass('active');\n    });\n    this.refresh();\n  }\n\n  activate(cropper) {\n    cropper = cropper || Array.from(this.crops).pop();\n    if (cropper) {\n      this.shades.enable();\n      this.active = cropper;\n      this.crops.delete(cropper);\n      this.crops.add(cropper);\n      this.reorderCroppers();\n      this.active.el.focus();\n    } else {\n      this.shades.disable();\n    }\n    return this;\n  }\n\n  addCropper(cropper) {\n    cropper.attachToStage(this);\n    cropper.appendTo(this.el);\n    cropper.init();\n    this.activate(cropper);\n    return this;\n  }\n\n  removeCropper(cropper) {\n    if (!this.canRemove()) return false;\n    cropper.el.remove();\n    this.crops.delete(cropper);\n    this.activate();\n  }\n\n  refresh() {\n    this.options.shading && this.active && this.shades.adjust(this.active.pos);\n  }\n}\n\nexport default Stage;\n\n","import { wrap, replace, div } from '../util/dom';\nimport Stage from './dom';\n\nclass ImageStage extends Stage {\n  constructor(el,options) {\n    const wrapper = div('cropstage imagestage');\n    el.parentNode.insertBefore(wrapper, el);\n    wrapper.appendChild(el);\n    super(wrapper,options);\n    this.srcEl = el;\n    el.onload = this.resizeToImage.bind(this);\n    this.resizeToImage();\n    console.log('image stage!');\n  }\n\n  resizeToImage() {\n    const w = this.srcEl.width;\n    const h = this.srcEl.height;\n    this.el.style.width = w+'px';\n    this.el.style.height = h+'px';\n    this.refresh();\n  }\n}\n\nexport default ImageStage;\n","/* This class creates a draggable frame by locking the\n   corner opposite to the one being dragged */\n\nimport Rect from './rect';\n\nclass Sticker {\n\n  constructor(rect,w,h,ord) {\n    this.sw = w;\n    this.sh = h;\n    this.rect = rect;\n    this.locked = this.getCornerPoint(this.getOppositeCorner(ord));\n    this.stuck = this.getCornerPoint(ord);\n  }\n\n  move(x,y) {\n    return Rect.fromCoordSet(this.locked, this.translateStuckPoint(x,y));\n  }\n\n  translateStuckPoint(ox,oy) {\n    const [xx,yy,sp] = this.stuck;\n    var x = (xx === null)? sp: xx + ox;\n    var y = (yy === null)? sp: yy + oy;\n    if (x>this.sw) x = this.sw;\n    if (y>this.sh) y = this.sh;\n    if (x<0) x = 0;\n    if (y<0) y = 0;\n    return [x,y];\n  }\n\n  getCornerPoint(h) {\n    const p = this.rect;\n    switch(h) {\n      case 'n':  return [ null, p.y,  p.x  ];\n      case 's':  return [ null, p.y2, p.x2 ];\n      case 'e':  return [ p.x2, null, p.y2 ];\n      case 'w':  return [ p.x,  null, p.y  ];\n      case 'se': return [ p.x2, p.y2 ];\n      case 'sw': return [ p.x,  p.y2 ];\n      case 'ne': return [ p.x2, p.y  ];\n      case 'nw': return [ p.x,  p.y  ];\n    }\n  }\n\n  getOppositeCorner(h) {\n    switch(h){\n      case 'n':  return 'se';\n      case 's':  return 'nw';\n      case 'e':  return 'nw';\n      case 'w':  return 'se';\n      case 'se': return 'nw';\n      case 'sw': return 'ne';\n      case 'ne': return 'sw';\n      case 'nw': return 'se';\n    }\n  }\n\n}\n\nSticker.create = function(rect,w,h,ord){\n  return new Sticker(rect,w,h,ord);\n};\n\nexport default Sticker;\n","export const wrap = (target, wrapper=document.createElement('div')) => {\n  [ ...target.childNodes ].forEach(child => wrapper.appendChild(child));\n  target.appendChild(wrapper);\n  return wrapper;\n};\n\nexport const div = (clname,el=document.createElement('div')) => {\n  el.className = clname;\n  return el;\n};\n\nexport const replace = (orig, target) => {\n  orig.parentElement.replaceChild(target,orig);\n  return target;\n};\n\n","export default function extend() {\n  var extended = {};\n\n  for(let key in arguments) {\n    var argument = arguments[key];\n    for (let prop in argument) {\n      if (Object.prototype.hasOwnProperty.call(argument, prop)) {\n        extended[prop] = argument[prop];\n      }\n    }\n  }\n\n  return extended;\n};\n\n"],"sourceRoot":""}